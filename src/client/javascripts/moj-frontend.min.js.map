{"version":3,"file":"moj-frontend.min.js","sources":["../package/moj/components/add-another/add-another.mjs","../package/moj/helpers.mjs","../package/moj/components/alert/alert.mjs","../package/moj/components/button-menu/button-menu.mjs","../package/moj/components/date-picker/date-picker.mjs","../package/moj/components/filter-toggle-button/filter-toggle-button.mjs","../package/moj/components/multi-file-upload/multi-file-upload.mjs","../package/moj/components/multi-select/multi-select.mjs","../package/moj/components/password-reveal/password-reveal.mjs","../package/moj/components/rich-text-editor/rich-text-editor.mjs","../package/moj/components/search-toggle/search-toggle.mjs","../package/moj/components/sortable-table/sortable-table.mjs","../package/moj/all.mjs","../package/moj/version.mjs"],"sourcesContent":["function AddAnother(container) {\n  this.container = $(container);\n\n  if (this.container.data('moj-add-another-initialised')) {\n    return\n  }\n\n  this.container.data('moj-add-another-initialised', true);\n\n  this.container.on(\n    'click',\n    '.moj-add-another__remove-button',\n    $.proxy(this, 'onRemoveButtonClick')\n  );\n  this.container.on(\n    'click',\n    '.moj-add-another__add-button',\n    $.proxy(this, 'onAddButtonClick')\n  );\n  this.container\n    .find('.moj-add-another__add-button, moj-add-another__remove-button')\n    .prop('type', 'button');\n}\n\nAddAnother.prototype.onAddButtonClick = function (e) {\n  const item = this.getNewItem();\n  this.updateAttributes(this.getItems().length, item);\n  this.resetItem(item);\n  const firstItem = this.getItems().first();\n  if (!this.hasRemoveButton(firstItem)) {\n    this.createRemoveButton(firstItem);\n  }\n  this.getItems().last().after(item);\n  item.find('input, textarea, select').first().focus();\n};\n\nAddAnother.prototype.hasRemoveButton = function (item) {\n  return item.find('.moj-add-another__remove-button').length\n};\n\nAddAnother.prototype.getItems = function () {\n  return this.container.find('.moj-add-another__item')\n};\n\nAddAnother.prototype.getNewItem = function () {\n  const item = this.getItems().first().clone();\n  if (!this.hasRemoveButton(item)) {\n    this.createRemoveButton(item);\n  }\n  return item\n};\n\nAddAnother.prototype.updateAttributes = function (index, item) {\n  item.find('[data-name]').each(function (i, el) {\n    const originalId = el.id;\n\n    el.name = $(el)\n      .attr('data-name')\n      .replace(/%index%/, index);\n    el.id = $(el)\n      .attr('data-id')\n      .replace(/%index%/, index);\n\n    const label =\n      $(el).siblings('label')[0] ||\n      $(el).parents('label')[0] ||\n      item.find(`[for=\"${originalId}\"]`)[0];\n    label.htmlFor = el.id;\n  });\n};\n\nAddAnother.prototype.createRemoveButton = function (item) {\n  item.append(\n    '<button type=\"button\" class=\"govuk-button govuk-button--secondary moj-add-another__remove-button\">Remove</button>'\n  );\n};\n\nAddAnother.prototype.resetItem = function (item) {\n  item.find('[data-name], [data-id]').each(function (index, el) {\n    if (el.type === 'checkbox' || el.type === 'radio') {\n      el.checked = false;\n    } else {\n      el.value = '';\n    }\n  });\n};\n\nAddAnother.prototype.onRemoveButtonClick = function (e) {\n  $(e.currentTarget).parents('.moj-add-another__item').remove();\n  const items = this.getItems();\n  if (items.length === 1) {\n    items.find('.moj-add-another__remove-button').remove();\n  }\n  items.each(\n    $.proxy(function (index, el) {\n      this.updateAttributes(index, $(el));\n    }, this)\n  );\n  this.focusHeading();\n};\n\nAddAnother.prototype.focusHeading = function () {\n  this.container.find('.moj-add-another__heading').get(0).focus();\n};\n\nexport { AddAnother };\n//# sourceMappingURL=add-another.mjs.map\n","function dragAndDropSupported() {\n  const div = document.createElement('div');\n  return typeof div.ondrop !== 'undefined'\n}\n\nfunction formDataSupported() {\n  return typeof FormData === 'function'\n}\n\nfunction fileApiSupported() {\n  const input = document.createElement('input');\n  input.type = 'file';\n  return typeof input.files !== 'undefined'\n}\n\nfunction nodeListForEach(nodes, callback) {\n  if (window.NodeList.prototype.forEach) {\n    return nodes.forEach(callback)\n  }\n  for (let i = 0; i < nodes.length; i++) {\n    callback.call(window, nodes[i], i, nodes);\n  }\n}\n\n/**\n * Find an elements preceding sibling\n *\n * Utility function to find an elements previous sibling matching the provided\n * selector.\n *\n * @param {HTMLElement} $element - Element to find siblings for\n * @param {string} selector - selector for required sibling\n */\nfunction getPreviousSibling($element, selector) {\n  if (!$element) return\n  // Get the previous sibling element\n  let $sibling = $element.previousElementSibling;\n\n  // If the sibling matches our selector, use it\n  // If not, jump to the next sibling and continue the loop\n  while ($sibling) {\n    if ($sibling.matches(selector)) return $sibling\n    $sibling = $sibling.previousElementSibling;\n  }\n}\n\nfunction findNearestMatchingElement($element, selector) {\n  // If no element or selector is provided, return null\n  if (!$element) return\n\n  // Start with the current element\n  let $currentElement = $element;\n\n  while ($currentElement) {\n    // First check the current element\n    if ($currentElement.matches(selector)) {\n      return $currentElement\n    }\n\n    // Check all previous siblings\n    let $sibling = $currentElement.previousElementSibling;\n    while ($sibling) {\n      // Check if the sibling itself is a heading\n      if ($sibling.matches(selector)) {\n        return $sibling\n      }\n      $sibling = $sibling.previousElementSibling;\n    }\n\n    // If no match found in siblings, move up to parent\n    $currentElement = $currentElement.parentElement;\n  }\n}\n\n/**\n * Move focus to element\n *\n * Sets tabindex to -1 to make the element programmatically focusable,\n * but removes it on blur as the element doesn't need to be focused again.\n *\n * @param {HTMLElement} $element - HTML element\n * @param {object} [options] - Handler options\n * @param {function(this: HTMLElement): void} [options.onBeforeFocus] - Callback before focus\n * @param {function(this: HTMLElement): void} [options.onBlur] - Callback on blur\n */\nfunction setFocus($element, options = {}) {\n  const isFocusable = $element.getAttribute('tabindex');\n\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1');\n  }\n\n  /**\n   * Handle element focus\n   */\n  function onFocus() {\n    $element.addEventListener('blur', onBlur, { once: true });\n  }\n\n  /**\n   * Handle element blur\n   */\n  function onBlur() {\n    if (options.onBlur) {\n      options.onBlur.call($element);\n    }\n\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex');\n    }\n  }\n\n  // Add listener to reset element on blur, after focus\n  $element.addEventListener('focus', onFocus, { once: true });\n\n  // Focus element\n  if (options.onBeforeFocus) {\n    options.onBeforeFocus.call($element);\n  }\n  $element.focus();\n}\n\nexport { dragAndDropSupported, fileApiSupported, findNearestMatchingElement, formDataSupported, getPreviousSibling, nodeListForEach, setFocus };\n//# sourceMappingURL=helpers.mjs.map\n","import { setFocus, getPreviousSibling, findNearestMatchingElement } from '../../helpers.mjs';\n\n/**\n * @typedef {object} AlertConfig\n * @property {boolean} [dismissible=false] - Can the alert be dismissed by the user\n * @property {string} [dismissText=Dismiss] - the label text for the dismiss button\n * @property {boolean} [disableAutoFocus=false] - whether the alert will be autofocused\n * @property {string} [focusOnDismissSelector] - CSS Selector for element to be focused on dismiss\n */\n\n/**\n * @param {HTMLElement} $module - the Alert element\n * @param {AlertConfig} config - configuration options\n * @class\n */\nfunction Alert($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      dismissible: { type: 'boolean' },\n      dismissText: { type: 'string' },\n      disableAutoFocus: { type: 'boolean' },\n      focusOnDismissSelector: { type: 'string' }\n    }\n  });\n\n  const defaults = {\n    dismissible: false,\n    dismissText: 'Dismiss',\n    disableAutoFocus: false\n  };\n\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  );\n\n  this.$module = $module;\n}\n\nAlert.prototype.init = function () {\n  /**\n   * Focus the alert\n   *\n   * If `role=\"alert\"` is set, focus the element to help some assistive\n   * technologies prioritise announcing it.\n   *\n   * You can turn off the auto-focus functionality by setting\n   * `data-disable-auto-focus=\"true\"` in the component HTML. You might wish to\n   * do this based on user research findings, or to avoid a clash with another\n   * element which should be focused when the page loads.\n   */\n  if (\n    this.$module.getAttribute('role') === 'alert' &&\n    !this.config.disableAutoFocus\n  ) {\n    setFocus(this.$module);\n  }\n\n  this.$dismissButton = this.$module.querySelector('.moj-alert__dismiss');\n\n  if (this.config.dismissible && this.$dismissButton) {\n    this.$dismissButton.innerHTML = this.config.dismissText;\n    this.$dismissButton.removeAttribute('hidden');\n\n    this.$module.addEventListener('click', (event) => {\n      if (this.$dismissButton.contains(event.target)) {\n        this.dimiss();\n      }\n    });\n  }\n};\n\n/**\n * Handle dismissing the alert\n */\nAlert.prototype.dimiss = function () {\n  let $elementToRecieveFocus;\n\n  // If a selector has been provided, attempt to find that element\n  if (this.config.focusOnDismissSelector) {\n    $elementToRecieveFocus = document.querySelector(\n      this.config.focusOnDismissSelector\n    );\n  }\n\n  // Is the next sibling another alert\n  if (!$elementToRecieveFocus) {\n    const $nextSibling = this.$module.nextElementSibling;\n    if ($nextSibling && $nextSibling.matches('.moj-alert')) {\n      $elementToRecieveFocus = $nextSibling;\n    }\n  }\n\n  // Else try to find any preceding sibling alert or heading\n  if (!$elementToRecieveFocus) {\n    $elementToRecieveFocus = getPreviousSibling(\n      this.$module,\n      '.moj-alert, h1, h2, h3, h4, h5, h6'\n    );\n  }\n\n  // Else find the closest ancestor heading, or fallback to main, or last resort\n  // use the body element\n  if (!$elementToRecieveFocus) {\n    $elementToRecieveFocus = findNearestMatchingElement(\n      this.$module,\n      'h1, h2, h3, h4, h5, h6, main, body'\n    );\n  }\n\n  // If we have an element, place focus on it\n  if ($elementToRecieveFocus) {\n    setFocus($elementToRecieveFocus);\n  }\n\n  // Remove the alert\n  this.$module.remove();\n};\n\n/**\n * Normalise string\n *\n * 'If it looks like a duck, and it quacks like a duckâ€¦' ðŸ¦†\n *\n * If the passed value looks like a boolean or a number, convert it to a boolean\n * or number.\n *\n * Designed to be used to convert config passed via data attributes (which are\n * always strings) into something sensible.\n *\n * @internal\n * @param {DOMStringMap[string]} value - The value to normalise\n * @param {SchemaProperty} [property] - Component schema property\n * @returns {string | boolean | number | undefined} Normalised data\n */\nAlert.prototype.normaliseString = function (value, property) {\n  const trimmedValue = value ? value.trim() : '';\n\n  let output;\n  let outputType;\n  if (property && property.type) {\n    outputType = property.type;\n  }\n\n  // No schema type set? Determine automatically\n  if (!outputType) {\n    if (['true', 'false'].includes(trimmedValue)) {\n      outputType = 'boolean';\n    }\n\n    // Empty / whitespace-only strings are considered finite so we need to check\n    // the length of the trimmed string as well\n    if (trimmedValue.length > 0 && isFinite(Number(trimmedValue))) {\n      outputType = 'number';\n    }\n  }\n\n  switch (outputType) {\n    case 'boolean':\n      output = trimmedValue === 'true';\n      break\n\n    case 'number':\n      output = Number(trimmedValue);\n      break\n\n    default:\n      output = value;\n  }\n\n  return output\n};\n\n/**\n * Parse dataset\n *\n * Loop over an object and normalise each value using {@link normaliseString},\n * optionally expanding nested `i18n.field`\n *\n * @param {Schema} schema - component schema\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nAlert.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {};\n\n  for (const [field, property] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      if (dataset[field]) {\n        parsed[field] = this.normaliseString(dataset[field], property);\n      }\n    }\n  }\n\n  return parsed\n};\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nAlert.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {};\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key];\n      const override = configObject[key];\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override);\n      } else {\n        formattedConfigObject[key] = override;\n      }\n    }\n  }\n\n  return formattedConfigObject\n};\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n\nexport { Alert };\n//# sourceMappingURL=alert.mjs.map\n","/**\n * @typedef {object} ButtonMenuConfig\n * @property {string} [buttonText=Actions] - Label for the toggle button\n * @property {\"left\" | \"right\"} [alignMenu=left] - the alignment of the menu\n * @property {string} [buttonClasses=govuk-button--secondary] - css classes applied to the toggle button\n */\n\n/**\n * @param {HTMLElement} $module\n * @param {ButtonMenuConfig} config\n * @class\n */\nfunction ButtonMenu($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      buttonText: { type: 'string' },\n      buttonClasses: { type: 'string' },\n      alignMenu: { type: 'string' }\n    }\n  });\n\n  const defaults = {\n    buttonText: 'Actions',\n    alignMenu: 'left',\n    buttonClasses: ''\n  };\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  );\n\n  this.$module = $module;\n}\n\nButtonMenu.prototype.init = function () {\n  // If only one button is provided, don't initiate a menu and toggle button\n  // if classes have been provided for the toggleButton, apply them to the single item\n  if (this.$module.children.length === 1) {\n    const button = this.$module.children[0];\n    button.classList.forEach((className) => {\n      if (className.startsWith('govuk-button-')) {\n        button.classList.remove(className);\n      }\n      button.classList.remove('moj-button-menu__item');\n    });\n    if (this.config.buttonClasses) {\n      button.classList.add(...this.config.buttonClasses.split(' '));\n    }\n  }\n  // Otherwise intialise a button menu\n  if (this.$module.children.length > 1) {\n    this.initMenu();\n  }\n};\n\nButtonMenu.prototype.initMenu = function () {\n  this.$menu = this.createMenu();\n  this.$module.insertAdjacentHTML('afterbegin', this.toggleTemplate());\n  this.setupMenuItems();\n\n  this.$menuToggle = this.$module.querySelector(':scope > button');\n  this.items = this.$menu.querySelectorAll('a, button');\n\n  this.$menuToggle.addEventListener('click', (event) => {\n    this.toggleMenu(event);\n  });\n\n  this.$module.addEventListener('keydown', (event) => {\n    this.handleKeyDown(event);\n  });\n\n  document.addEventListener('click', (event) => {\n    if (!this.$module.contains(event.target)) {\n      this.closeMenu(false);\n    }\n  });\n};\n\nButtonMenu.prototype.createMenu = function () {\n  const $menu = document.createElement('ul');\n  $menu.setAttribute('role', 'list');\n  $menu.hidden = true;\n  $menu.classList.add('moj-button-menu__wrapper');\n  if (this.config.alignMenu === 'right') {\n    $menu.classList.add('moj-button-menu__wrapper--right');\n  }\n\n  this.$module.appendChild($menu);\n  while (this.$module.firstChild !== $menu) {\n    $menu.appendChild(this.$module.firstChild);\n  }\n\n  return $menu\n};\n\nButtonMenu.prototype.setupMenuItems = function () {\n  Array.from(this.$menu.children).forEach((item) => {\n    // wrap item in li tag\n    const listItem = document.createElement('li');\n    this.$menu.insertBefore(listItem, item);\n    listItem.appendChild(item);\n\n    item.setAttribute('tabindex', -1);\n\n    if (item.tagName === 'BUTTON') {\n      item.setAttribute('type', 'button');\n    }\n\n    item.classList.forEach((className) => {\n      if (className.startsWith('govuk-button')) {\n        item.classList.remove(className);\n      }\n    });\n\n    // add a slight delay after click before closing the menu, makes it *feel* better\n    item.addEventListener('click', (event) => {\n      setTimeout(() => {\n        this.closeMenu(false);\n      }, 50);\n    });\n  });\n};\n\nButtonMenu.prototype.toggleTemplate = function () {\n  return `\n    <button type=\"button\" class=\"govuk-button moj-button-menu__toggle-button ${this.config.buttonClasses || ''}\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      <span>\n       ${this.config.buttonText}\n       <svg width=\"11\" height=\"5\" viewBox=\"0 0 11 5\"  xmlns=\"http://www.w3.org/2000/svg\">\n         <path d=\"M5.5 0L11 5L0 5L5.5 0Z\" fill=\"currentColor\"/>\n       </svg>\n      </span>\n    </button>`\n};\n\n/**\n * @returns {boolean}\n */\nButtonMenu.prototype.isOpen = function () {\n  return this.$menuToggle.getAttribute('aria-expanded') === 'true'\n};\n\nButtonMenu.prototype.toggleMenu = function (event) {\n  event.preventDefault();\n\n  // If menu is triggered with mouse don't move focus to first item\n  const keyboardEvent = event.detail === 0;\n  const focusIndex = keyboardEvent ? 0 : -1;\n\n  if (this.isOpen()) {\n    this.closeMenu();\n  } else {\n    this.openMenu(focusIndex);\n  }\n};\n\n/**\n * Opens the menu and optionally sets the focus to the item with given index\n *\n * @param {number} focusIndex - The index of the item to focus\n */\nButtonMenu.prototype.openMenu = function (focusIndex = 0) {\n  this.$menu.hidden = false;\n  this.$menuToggle.setAttribute('aria-expanded', 'true');\n  if (focusIndex !== -1) {\n    this.focusItem(focusIndex);\n  }\n};\n\n/**\n * Closes the menu and optionally returns focus back to menuToggle\n *\n * @param {boolean} moveFocus - whether to return focus to the toggle button\n */\nButtonMenu.prototype.closeMenu = function (moveFocus = true) {\n  this.$menu.hidden = true;\n  this.$menuToggle.setAttribute('aria-expanded', 'false');\n  if (moveFocus) {\n    this.$menuToggle.focus();\n  }\n};\n\n/**\n * Focuses the menu item at the specified index\n *\n * @param {number} index - the index of the item to focus\n */\nButtonMenu.prototype.focusItem = function (index) {\n  if (index >= this.items.length) index = 0;\n  if (index < 0) index = this.items.length - 1;\n\n  const menuItem = this.items.item(index);\n  if (menuItem) {\n    menuItem.focus();\n  }\n};\n\nButtonMenu.prototype.currentFocusIndex = function () {\n  const activeElement = document.activeElement;\n  const menuItems = Array.from(this.items);\n\n  return menuItems.indexOf(activeElement)\n};\n\nButtonMenu.prototype.handleKeyDown = function (event) {\n  if (event.target === this.$menuToggle) {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        this.openMenu();\n        break\n      case 'ArrowUp':\n        event.preventDefault();\n        this.openMenu(this.items.length - 1);\n        break\n    }\n  }\n\n  if (this.$menu.contains(event.target) && this.isOpen()) {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        if (this.currentFocusIndex() !== -1) {\n          this.focusItem(this.currentFocusIndex() + 1);\n        }\n        break\n      case 'ArrowUp':\n        event.preventDefault();\n        if (this.currentFocusIndex() !== -1) {\n          this.focusItem(this.currentFocusIndex() - 1);\n        }\n        break\n      case 'Home':\n        event.preventDefault();\n        this.focusItem(0);\n        break\n      case 'End':\n        event.preventDefault();\n        this.focusItem(this.items.length - 1);\n        break\n    }\n  }\n\n  if (event.key === 'Escape' && this.isOpen()) {\n    this.closeMenu();\n  }\n  if (event.key === 'Tab' && this.isOpen()) {\n    this.closeMenu(false);\n  }\n};\n\n/**\n * Parse dataset\n *\n * Loop over an object and normalise each value using {@link normaliseString},\n * optionally expanding nested `i18n.field`\n *\n * @param {Schema} schema - component schema\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nButtonMenu.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {};\n\n  for (const [field, ,] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      if (dataset[field]) {\n        parsed[field] = dataset[field];\n      }\n    }\n  }\n\n  return parsed\n};\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nButtonMenu.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {};\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key];\n      const override = configObject[key];\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override);\n      } else {\n        formattedConfigObject[key] = override;\n      }\n    }\n  }\n\n  return formattedConfigObject\n};\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n\nexport { ButtonMenu };\n//# sourceMappingURL=button-menu.mjs.map\n","/**\n * Date picker config\n *\n * @typedef {object} DatePickerConfig\n * @property {string} [excludedDates] - Dates that cannot be selected\n * @property {string} [excludedDays] - Days that cannot be selected\n * @property {boolean} [leadingZeroes] - Whether to add leading zeroes when populating the field\n * @property {string} [minDate] - The earliest available date\n * @property {string} [maxDate] - The latest available date\n * @property {string} [weekStartDay] - First day of the week in calendar view\n */\n\n/**\n * @param {HTMLElement} $module - HTML element\n * @param {DatePickerConfig} config - config object\n * @class\n */\nfunction DatePicker($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      excludedDates: { type: 'string' },\n      excludedDays: { type: 'string' },\n      leadingZeros: { type: 'string' },\n      maxDate: { type: 'string' },\n      minDate: { type: 'string' },\n      weekStartDay: { type: 'string' }\n    }\n  });\n\n  const defaults = {\n    leadingZeros: false,\n    weekStartDay: 'monday'\n  };\n\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  );\n\n  this.dayLabels = [\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n    'Saturday',\n    'Sunday'\n  ];\n\n  this.monthLabels = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  this.currentDate = new Date();\n  this.currentDate.setHours(0, 0, 0, 0);\n  this.calendarDays = [];\n  this.excludedDates = [];\n  this.excludedDays = [];\n\n  this.buttonClass = 'moj-datepicker__button';\n  this.selectedDayButtonClass = 'moj-datepicker__button--selected';\n  this.currentDayButtonClass = 'moj-datepicker__button--current';\n  this.todayButtonClass = 'moj-datepicker__button--today';\n\n  this.$module = $module;\n  this.$input = $module.querySelector('.moj-js-datepicker-input');\n}\n\nDatePicker.prototype.init = function () {\n  // Check that required elements are present\n  if (!this.$input) {\n    return\n  }\n  if (this.$module.dataset.initialized) {\n    return\n  }\n\n  this.setOptions();\n  this.initControls();\n  this.$module.setAttribute('data-initialized', 'true');\n};\n\nDatePicker.prototype.initControls = function () {\n  this.id = `datepicker-${this.$input.id}`;\n\n  this.$dialog = this.createDialog();\n  this.createCalendarHeaders();\n\n  const $componentWrapper = document.createElement('div');\n  const $inputWrapper = document.createElement('div');\n  $componentWrapper.classList.add('moj-datepicker__wrapper');\n  $inputWrapper.classList.add('govuk-input__wrapper');\n\n  this.$input.parentNode.insertBefore($componentWrapper, this.$input);\n  $componentWrapper.appendChild($inputWrapper);\n  $inputWrapper.appendChild(this.$input);\n\n  $inputWrapper.insertAdjacentHTML('beforeend', this.toggleTemplate());\n  $componentWrapper.insertAdjacentElement('beforeend', this.$dialog);\n\n  this.$calendarButton = this.$module.querySelector('.moj-js-datepicker-toggle');\n  this.$dialogTitle = this.$dialog.querySelector(\n    '.moj-js-datepicker-month-year'\n  );\n\n  this.createCalendar();\n\n  this.$prevMonthButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-prev-month'\n  );\n  this.$prevYearButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-prev-year'\n  );\n  this.$nextMonthButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-next-month'\n  );\n  this.$nextYearButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-next-year'\n  );\n  this.$cancelButton = this.$dialog.querySelector('.moj-js-datepicker-cancel');\n  this.$okButton = this.$dialog.querySelector('.moj-js-datepicker-ok');\n\n  // add event listeners\n  this.$prevMonthButton.addEventListener('click', (event) =>\n    this.focusPreviousMonth(event, false)\n  );\n  this.$prevYearButton.addEventListener('click', (event) =>\n    this.focusPreviousYear(event, false)\n  );\n  this.$nextMonthButton.addEventListener('click', (event) =>\n    this.focusNextMonth(event, false)\n  );\n  this.$nextYearButton.addEventListener('click', (event) =>\n    this.focusNextYear(event, false)\n  );\n  this.$cancelButton.addEventListener('click', (event) => {\n    event.preventDefault();\n    this.closeDialog(event);\n  });\n  this.$okButton.addEventListener('click', () => {\n    this.selectDate(this.currentDate);\n  });\n\n  const dialogButtons = this.$dialog.querySelectorAll(\n    'button:not([disabled=\"true\"])'\n  );\n  // eslint-disable-next-line prefer-destructuring\n  this.$firstButtonInDialog = dialogButtons[0];\n  this.$lastButtonInDialog = dialogButtons[dialogButtons.length - 1];\n  this.$firstButtonInDialog.addEventListener('keydown', (event) =>\n    this.firstButtonKeydown(event)\n  );\n  this.$lastButtonInDialog.addEventListener('keydown', (event) =>\n    this.lastButtonKeydown(event)\n  );\n\n  this.$calendarButton.addEventListener('click', (event) =>\n    this.toggleDialog(event)\n  );\n\n  this.$dialog.addEventListener('keydown', (event) => {\n    if (event.key === 'Escape') {\n      this.closeDialog();\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  });\n\n  document.body.addEventListener('mouseup', (event) =>\n    this.backgroundClick(event)\n  );\n\n  // populates calendar with initial dates, avoids Wave errors about null buttons\n  this.updateCalendar();\n};\n\nDatePicker.prototype.createDialog = function () {\n  const titleId = `datepicker-title-${this.$input.id}`;\n  const $dialog = document.createElement('div');\n\n  $dialog.id = this.id;\n  $dialog.setAttribute('class', 'moj-datepicker__dialog');\n  $dialog.setAttribute('role', 'dialog');\n  $dialog.setAttribute('aria-modal', 'true');\n  $dialog.setAttribute('aria-labelledby', titleId);\n  $dialog.innerHTML = this.dialogTemplate(titleId);\n  $dialog.hidden = true;\n\n  return $dialog\n};\n\nDatePicker.prototype.createCalendar = function () {\n  const $tbody = this.$dialog.querySelector('tbody');\n  let dayCount = 0;\n  for (let i = 0; i < 6; i++) {\n    // create row\n    const $row = $tbody.insertRow(i);\n\n    for (let j = 0; j < 7; j++) {\n      // create cell (day)\n      const $cell = document.createElement('td');\n      const $dateButton = document.createElement('button');\n\n      $cell.appendChild($dateButton);\n      $row.appendChild($cell);\n\n      const calendarDay = new DSCalendarDay($dateButton, dayCount, i, j, this);\n      calendarDay.init();\n      this.calendarDays.push(calendarDay);\n      dayCount++;\n    }\n  }\n};\n\nDatePicker.prototype.toggleTemplate = function () {\n  return `<button class=\"moj-datepicker__toggle moj-js-datepicker-toggle\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"${this.id}\" aria-expanded=\"false\">\n            <span class=\"govuk-visually-hidden\">Choose date</span>\n            <svg width=\"32\" height=\"24\" focusable=\"false\" class=\"moj-datepicker-icon\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\">\n              <path\n                fill=\"currentColor\"\n                fill-rule=\"evenodd\"\n                clip-rule=\"evenodd\"\n                d=\"M16.1333 2.93333H5.86668V4.4C5.86668 5.21002 5.21003 5.86667 4.40002 5.86667C3.59 5.86667 2.93335 5.21002 2.93335 4.4V2.93333H2C0.895431 2.93333 0 3.82877 0 4.93334V19.2667C0 20.3712 0.89543 21.2667 2 21.2667H20C21.1046 21.2667 22 20.3712 22 19.2667V4.93333C22 3.82876 21.1046 2.93333 20 2.93333H19.0667V4.4C19.0667 5.21002 18.41 5.86667 17.6 5.86667C16.79 5.86667 16.1333 5.21002 16.1333 4.4V2.93333ZM20.5333 8.06667H1.46665V18.8C1.46665 19.3523 1.91436 19.8 2.46665 19.8H19.5333C20.0856 19.8 20.5333 19.3523 20.5333 18.8V8.06667Z\"\n              ></path>\n              <rect x=\"3.66669\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n              <rect x=\"16.8667\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n            </svg>\n          </button>`\n};\n\n/**\n * HTML template for calendar dialog\n *\n * @param {string} [titleId] - Id attribute for dialog title\n * @returns {string}\n */\nDatePicker.prototype.dialogTemplate = function (titleId) {\n  return `<div class=\"moj-datepicker__dialog-header\">\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button class=\"moj-datepicker__button moj-js-datepicker-prev-year\">\n                <span class=\"govuk-visually-hidden\">Previous year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.1643 20L28.9572 14.2071L27.5429 12.7929L20.3358 20L27.5429 27.2071L28.9572 25.7929L23.1643 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.1643 20L22.9572 14.2071L21.5429 12.7929L14.3358 20L21.5429 27.2071L22.9572 25.7929L17.1643 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button class=\"moj-datepicker__button moj-js-datepicker-prev-month\">\n                <span class=\"govuk-visually-hidden\">Previous month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5729 20L25.7865 14.2071L24.5137 12.7929L18.0273 20L24.5137 27.2071L25.7865 25.7929L20.5729 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n\n            <h2 id=\"${titleId}\" class=\"moj-datepicker__dialog-title moj-js-datepicker-month-year\" aria-live=\"polite\">June 2020</h2>\n\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button class=\"moj-datepicker__button moj-js-datepicker-next-month\">\n                <span class=\"govuk-visually-hidden\">Next month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\"  focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.4271 20L18.2135 14.2071L19.4863 12.7929L25.9727 20L19.4863 27.2071L18.2135 25.7929L23.4271 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button class=\"moj-datepicker__button moj-js-datepicker-next-year\">\n                <span class=\"govuk-visually-hidden\">Next year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.8357 20L15.0428 14.2071L16.4571 12.7929L23.6642 20L16.4571 27.2071L15.0428 25.7929L20.8357 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.8357 20L21.0428 14.2071L22.4571 12.7929L29.6642 20L22.4571 27.2071L21.0428 25.7929L26.8357 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <table class=\"moj-datepicker__calendar moj-js-datepicker-grid\" role=\"grid\" aria-labelledby=\"${titleId}\">\n            <thead>\n              <tr></tr>\n            </thead>\n\n            <tbody></tbody>\n          </table>\n\n          <div class=\"govuk-button-group\">\n            <button type=\"button\" class=\"govuk-button moj-js-datepicker-ok\">Select</button>\n            <button type=\"button\" class=\"govuk-button govuk-button--secondary moj-js-datepicker-cancel\">Close</button>\n          </div>`\n};\n\nDatePicker.prototype.createCalendarHeaders = function () {\n  this.dayLabels.forEach((day) => {\n    const html = `<th scope=\"col\"><span aria-hidden=\"true\">${day.substring(0, 3)}</span><span class=\"govuk-visually-hidden\">${day}</span></th>`;\n    const $headerRow = this.$dialog.querySelector('thead > tr');\n    $headerRow.insertAdjacentHTML('beforeend', html);\n  });\n};\n\n/**\n * Pads given number with leading zeros\n *\n * @param {number} value - The value to be padded\n * @param {number} length - The length in characters of the output\n * @returns {string}\n */\nDatePicker.prototype.leadingZeros = function (value, length = 2) {\n  let ret = value.toString();\n\n  while (ret.length < length) {\n    ret = `0${ret}`;\n  }\n\n  return ret\n};\n\nDatePicker.prototype.setOptions = function () {\n  this.setMinAndMaxDatesOnCalendar();\n  this.setExcludedDates();\n  this.setExcludedDays();\n  this.setLeadingZeros();\n  this.setWeekStartDay();\n};\n\nDatePicker.prototype.setMinAndMaxDatesOnCalendar = function () {\n  if (this.config.minDate) {\n    this.minDate = this.formattedDateFromString(this.config.minDate, null);\n    if (this.minDate && this.currentDate < this.minDate) {\n      this.currentDate = this.minDate;\n    }\n  }\n\n  if (this.config.maxDate) {\n    this.maxDate = this.formattedDateFromString(this.config.maxDate, null);\n    if (this.maxDate && this.currentDate > this.maxDate) {\n      this.currentDate = this.maxDate;\n    }\n  }\n};\n\nDatePicker.prototype.setExcludedDates = function () {\n  if (this.config.excludedDates) {\n    this.excludedDates = this.config.excludedDates\n      .replace(/\\s+/, ' ')\n      .split(' ')\n      .map((item) => {\n        return item.includes('-')\n          ? this.parseDateRangeString(item)\n          : this.formattedDateFromString(item)\n      })\n      .flat()\n      .filter((item) => item);\n  }\n};\n\n/*\n * Parses a daterange string into an array of dates\n * @param {String} datestring - A daterange string in the format \"dd/mm/yyyy-dd/mm/yyyy\"\n * @returns {Date[]}\n */\nDatePicker.prototype.parseDateRangeString = function (datestring) {\n  const dates = [];\n  const [startDate, endDate] = datestring\n    .split('-')\n    .map((d) => this.formattedDateFromString(d, null));\n\n  if (startDate && endDate) {\n    const date = new Date(startDate.getTime());\n    /* eslint-disable no-unmodified-loop-condition */\n    while (date <= endDate) {\n      dates.push(new Date(date));\n      date.setDate(date.getDate() + 1);\n    }\n    /* eslint-enable no-unmodified-loop-condition */\n  }\n  return dates\n};\n\nDatePicker.prototype.setExcludedDays = function () {\n  if (this.config.excludedDays) {\n    // lowercase and arrange dayLabels to put indexOf sunday == 0 for comparison\n    // with getDay() function\n    const weekDays = this.dayLabels.map((item) => item.toLowerCase());\n    if (this.config.weekStartDay === 'monday') {\n      weekDays.unshift(weekDays.pop());\n    }\n\n    this.excludedDays = this.config.excludedDays\n      .replace(/\\s+/, ' ')\n      .toLowerCase()\n      .split(' ')\n      .map((item) => weekDays.indexOf(item))\n      .filter((item) => item !== -1);\n  }\n};\n\nDatePicker.prototype.setLeadingZeros = function () {\n  if (typeof this.config.leadingZeros !== 'boolean') {\n    if (this.config.leadingZeros.toLowerCase() === 'true') {\n      this.config.leadingZeros = true;\n      return\n    }\n    if (this.config.leadingZeros.toLowerCase() === 'false') {\n      this.config.leadingZeros = false;\n    }\n  }\n};\n\nDatePicker.prototype.setWeekStartDay = function () {\n  const weekStartDayParam = this.config.weekStartDay;\n  if (weekStartDayParam && weekStartDayParam.toLowerCase() === 'sunday') {\n    this.config.weekStartDay = 'sunday';\n    // Rotate dayLabels array to put Sunday as the first item\n    this.dayLabels.unshift(this.dayLabels.pop());\n  } else {\n    this.config.weekStartDay = 'monday';\n  }\n};\n\n/**\n * Determine if a date is selecteable\n *\n * @param {Date} date - the date to check\n * @returns {boolean}\n */\nDatePicker.prototype.isExcludedDate = function (date) {\n  // This comparison does not work correctly - it will exclude the mindate itself\n  // see: https://github.com/ministryofjustice/moj-frontend/issues/923\n  if (this.minDate && this.minDate > date) {\n    return true\n  }\n\n  // This comparison works as expected - the maxdate will not be excluded\n  if (this.maxDate && this.maxDate < date) {\n    return true\n  }\n\n  for (const excludedDate of this.excludedDates) {\n    if (date.toDateString() === excludedDate.toDateString()) {\n      return true\n    }\n  }\n\n  if (this.excludedDays.includes(date.getDay())) {\n    return true\n  }\n\n  return false\n};\n\n/**\n * Get a Date object from a string\n *\n * @param {string} dateString - string in the format d/m/yyyy dd/mm/yyyy\n * @param {Date} fallback - date object to return if formatting fails\n * @returns {Date}\n */\nDatePicker.prototype.formattedDateFromString = function (\n  dateString,\n  fallback = new Date()\n) {\n  let formattedDate = null;\n  // Accepts d/m/yyyy and dd/mm/yyyy\n  const dateFormatPattern = /(\\d{1,2})([-/,. ])(\\d{1,2})\\2(\\d{4})/;\n\n  if (!dateFormatPattern.test(dateString)) return fallback\n\n  const match = dateString.match(dateFormatPattern);\n  const day = match[1];\n  const month = match[3];\n  const year = match[4];\n\n  formattedDate = new Date(`${year}-${month}-${day}`);\n  if (formattedDate instanceof Date && !isNaN(formattedDate)) {\n    return formattedDate\n  }\n  return fallback\n};\n\n/**\n * Get a formatted date string from a Date object\n *\n * @param {Date} date - date to format to a string\n * @returns {string}\n */\nDatePicker.prototype.formattedDateFromDate = function (date) {\n  if (this.config.leadingZeros) {\n    return `${this.leadingZeros(date.getDate())}/${this.leadingZeros(date.getMonth() + 1)}/${date.getFullYear()}`\n  }\n\n  return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\n};\n\n/**\n * Get a human readable date in the format Monday 2 March 2024\n *\n * @param {Date} date - date to format\n * @returns {string}\n */\nDatePicker.prototype.formattedDateHuman = function (date) {\n  return `${this.dayLabels[(date.getDay() + 6) % 7]} ${date.getDate()} ${this.monthLabels[date.getMonth()]} ${date.getFullYear()}`\n};\n\nDatePicker.prototype.backgroundClick = function (event) {\n  if (\n    this.isOpen() &&\n    !this.$dialog.contains(event.target) &&\n    !this.$input.contains(event.target) &&\n    !this.$calendarButton.contains(event.target)\n  ) {\n    event.preventDefault();\n    this.closeDialog();\n  }\n};\n\nDatePicker.prototype.firstButtonKeydown = function (event) {\n  if (event.key === 'Tab' && event.shiftKey) {\n    this.$lastButtonInDialog.focus();\n    event.preventDefault();\n  }\n};\n\nDatePicker.prototype.lastButtonKeydown = function (event) {\n  if (event.key === 'Tab' && !event.shiftKey) {\n    this.$firstButtonInDialog.focus();\n    event.preventDefault();\n  }\n};\n\n// render calendar\nDatePicker.prototype.updateCalendar = function () {\n  this.$dialogTitle.innerHTML = `${this.monthLabels[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`;\n\n  const day = this.currentDate;\n  const firstOfMonth = new Date(day.getFullYear(), day.getMonth(), 1);\n  let dayOfWeek;\n\n  if (this.config.weekStartDay === 'monday') {\n    dayOfWeek = firstOfMonth.getDay() === 0 ? 6 : firstOfMonth.getDay() - 1; // Change logic to make Monday first day of week, i.e. 0\n  } else {\n    dayOfWeek = firstOfMonth.getDay();\n  }\n\n  firstOfMonth.setDate(firstOfMonth.getDate() - dayOfWeek);\n\n  const thisDay = new Date(firstOfMonth);\n\n  // loop through our days\n  for (let i = 0; i < this.calendarDays.length; i++) {\n    const hidden = thisDay.getMonth() !== day.getMonth();\n    const disabled = this.isExcludedDate(thisDay);\n\n    this.calendarDays[i].update(thisDay, hidden, disabled);\n\n    thisDay.setDate(thisDay.getDate() + 1);\n  }\n};\n\nDatePicker.prototype.setCurrentDate = function (focus = true) {\n  const { currentDate } = this;\n  this.calendarDays.forEach((calendarDay) => {\n    calendarDay.button.classList.add('moj-datepicker__button');\n    calendarDay.button.classList.add('moj-datepicker__calendar-day');\n    calendarDay.button.setAttribute('tabindex', -1);\n    calendarDay.button.classList.remove(this.selectedDayButtonClass);\n    const calendarDayDate = calendarDay.date;\n    calendarDayDate.setHours(0, 0, 0, 0);\n\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    if (\n      calendarDayDate.getTime() ===\n      currentDate.getTime() /* && !calendarDay.button.disabled */\n    ) {\n      if (focus) {\n        calendarDay.button.setAttribute('tabindex', 0);\n        calendarDay.button.focus();\n        calendarDay.button.classList.add(this.selectedDayButtonClass);\n      }\n    }\n\n    if (\n      this.inputDate &&\n      calendarDayDate.getTime() === this.inputDate.getTime()\n    ) {\n      calendarDay.button.classList.add(this.currentDayButtonClass);\n      calendarDay.button.setAttribute('aria-current', 'date');\n    } else {\n      calendarDay.button.classList.remove(this.currentDayButtonClass);\n      calendarDay.button.removeAttribute('aria-current');\n    }\n\n    if (calendarDayDate.getTime() === today.getTime()) {\n      calendarDay.button.classList.add(this.todayButtonClass);\n    } else {\n      calendarDay.button.classList.remove(this.todayButtonClass);\n    }\n  });\n\n  // if no date is tab-able, make the first non-disabled date tab-able\n  if (!focus) {\n    const enabledDays = this.calendarDays.filter((calendarDay) => {\n      return (\n        window.getComputedStyle(calendarDay.button).display === 'block' &&\n        !calendarDay.button.disabled\n      )\n    });\n\n    enabledDays[0].button.setAttribute('tabindex', 0);\n\n    this.currentDate = enabledDays[0].date;\n  }\n};\n\nDatePicker.prototype.selectDate = function (date) {\n  if (this.isExcludedDate(date)) {\n    return\n  }\n\n  this.$calendarButton.querySelector('span').innerText =\n    `Choose date. Selected date is ${this.formattedDateHuman(date)}`;\n  this.$input.value = this.formattedDateFromDate(date);\n\n  const changeEvent = new Event('change', { bubbles: true, cancelable: true });\n  this.$input.dispatchEvent(changeEvent);\n\n  this.closeDialog();\n};\n\nDatePicker.prototype.isOpen = function () {\n  return this.$dialog.classList.contains('moj-datepicker__dialog--open')\n};\n\nDatePicker.prototype.toggleDialog = function (event) {\n  event.preventDefault();\n  if (this.isOpen()) {\n    this.closeDialog();\n  } else {\n    this.setMinAndMaxDatesOnCalendar();\n    this.openDialog();\n  }\n};\n\nDatePicker.prototype.openDialog = function () {\n  this.$dialog.hidden = false;\n  this.$dialog.classList.add('moj-datepicker__dialog--open');\n  this.$calendarButton.setAttribute('aria-expanded', 'true');\n\n  // position the dialog\n  // if input is wider than dialog pin it to the right\n  if (this.$input.offsetWidth > this.$dialog.offsetWidth) {\n    this.$dialog.style.right = `0px`;\n  }\n  this.$dialog.style.top = `${this.$input.offsetHeight + 3}px`;\n\n  // get the date from the input element\n  this.inputDate = this.formattedDateFromString(this.$input.value);\n  this.currentDate = this.inputDate;\n  this.currentDate.setHours(0, 0, 0, 0);\n\n  this.updateCalendar();\n  this.setCurrentDate();\n};\n\nDatePicker.prototype.closeDialog = function () {\n  this.$dialog.hidden = true;\n  this.$dialog.classList.remove('moj-datepicker__dialog--open');\n  this.$calendarButton.setAttribute('aria-expanded', 'false');\n  this.$calendarButton.focus();\n};\n\nDatePicker.prototype.goToDate = function (date, focus) {\n  const current = this.currentDate;\n  this.currentDate = date;\n\n  if (\n    current.getMonth() !== this.currentDate.getMonth() ||\n    current.getFullYear() !== this.currentDate.getFullYear()\n  ) {\n    this.updateCalendar();\n  }\n\n  this.setCurrentDate(focus);\n};\n\n// day navigation\nDatePicker.prototype.focusNextDay = function () {\n  const date = new Date(this.currentDate);\n  date.setDate(date.getDate() + 1);\n  this.goToDate(date);\n};\n\nDatePicker.prototype.focusPreviousDay = function () {\n  const date = new Date(this.currentDate);\n  date.setDate(date.getDate() - 1);\n  this.goToDate(date);\n};\n\n// week navigation\nDatePicker.prototype.focusNextWeek = function () {\n  const date = new Date(this.currentDate);\n  date.setDate(date.getDate() + 7);\n  this.goToDate(date);\n};\n\nDatePicker.prototype.focusPreviousWeek = function () {\n  const date = new Date(this.currentDate);\n  date.setDate(date.getDate() - 7);\n  this.goToDate(date);\n};\n\nDatePicker.prototype.focusFirstDayOfWeek = function () {\n  const date = new Date(this.currentDate);\n  const firstDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 0 : 1;\n  const dayOfWeek = date.getDay();\n  const diff =\n    dayOfWeek >= firstDayOfWeekIndex\n      ? dayOfWeek - firstDayOfWeekIndex\n      : 6 - dayOfWeek;\n\n  date.setDate(date.getDate() - diff);\n  date.setHours(0, 0, 0, 0);\n\n  this.goToDate(date);\n};\n\nDatePicker.prototype.focusLastDayOfWeek = function () {\n  const date = new Date(this.currentDate);\n  const lastDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 6 : 0;\n  const dayOfWeek = date.getDay();\n  const diff =\n    dayOfWeek <= lastDayOfWeekIndex\n      ? lastDayOfWeekIndex - dayOfWeek\n      : 7 - dayOfWeek;\n\n  date.setDate(date.getDate() + diff);\n  date.setHours(0, 0, 0, 0);\n\n  this.goToDate(date);\n};\n\n// month navigation\nDatePicker.prototype.focusNextMonth = function (event, focus = true) {\n  event.preventDefault();\n  const date = new Date(this.currentDate);\n  date.setMonth(date.getMonth() + 1, 1);\n  this.goToDate(date, focus);\n};\n\nDatePicker.prototype.focusPreviousMonth = function (event, focus = true) {\n  event.preventDefault();\n  const date = new Date(this.currentDate);\n  date.setMonth(date.getMonth() - 1, 1);\n  this.goToDate(date, focus);\n};\n\n// year navigation\nDatePicker.prototype.focusNextYear = function (event, focus = true) {\n  event.preventDefault();\n  const date = new Date(this.currentDate);\n  date.setFullYear(date.getFullYear() + 1, date.getMonth(), 1);\n  this.goToDate(date, focus);\n};\n\nDatePicker.prototype.focusPreviousYear = function (event, focus = true) {\n  event.preventDefault();\n  const date = new Date(this.currentDate);\n  date.setFullYear(date.getFullYear() - 1, date.getMonth(), 1);\n  this.goToDate(date, focus);\n};\n\n/**\n * Parse dataset\n *\n * @param {Schema} schema - Component class\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nDatePicker.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {};\n\n  for (const [field, ,] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      parsed[field] = dataset[field];\n    }\n  }\n\n  return parsed\n};\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nDatePicker.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {};\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key];\n      const override = configObject[key];\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override);\n      } else {\n        formattedConfigObject[key] = override;\n      }\n    }\n  }\n\n  return formattedConfigObject\n};\n\n/**\n *\n * @param {HTMLElement} button\n * @param {number} index\n * @param {number} row\n * @param {number} column\n * @param {DatePicker} picker\n * @class\n */\nfunction DSCalendarDay(button, index, row, column, picker) {\n  this.index = index;\n  this.row = row;\n  this.column = column;\n  this.button = button;\n  this.picker = picker;\n\n  this.date = new Date();\n}\n\nDSCalendarDay.prototype.init = function () {\n  this.button.addEventListener('keydown', this.keyPress.bind(this));\n  this.button.addEventListener('click', this.click.bind(this));\n};\n\n/**\n * @param {Date} day - the Date for the calendar day\n * @param {boolean} hidden - visibility of the day\n * @param {boolean} disabled - is the day selectable or excluded\n */\nDSCalendarDay.prototype.update = function (day, hidden, disabled) {\n  const label = day.getDate();\n  let accessibleLabel = this.picker.formattedDateHuman(day);\n\n  if (disabled) {\n    this.button.setAttribute('aria-disabled', true);\n    accessibleLabel = `Excluded date, ${accessibleLabel}`;\n  } else {\n    this.button.removeAttribute('aria-disabled');\n  }\n\n  if (hidden) {\n    this.button.style.display = 'none';\n  } else {\n    this.button.style.display = 'block';\n  }\n  this.button.setAttribute(\n    'data-testid',\n    this.picker.formattedDateFromDate(day)\n  );\n\n  this.button.innerHTML = `<span class=\"govuk-visually-hidden\">${accessibleLabel}</span><span aria-hidden=\"true\">${label}</span>`;\n  this.date = new Date(day);\n};\n\nDSCalendarDay.prototype.click = function (event) {\n  this.picker.goToDate(this.date);\n  this.picker.selectDate(this.date);\n\n  event.stopPropagation();\n  event.preventDefault();\n};\n\nDSCalendarDay.prototype.keyPress = function (event) {\n  let calendarNavKey = true;\n\n  switch (event.key) {\n    case 'ArrowLeft':\n      this.picker.focusPreviousDay();\n      break\n    case 'ArrowRight':\n      this.picker.focusNextDay();\n      break\n    case 'ArrowUp':\n      this.picker.focusPreviousWeek();\n      break\n    case 'ArrowDown':\n      this.picker.focusNextWeek();\n      break\n    case 'Home':\n      this.picker.focusFirstDayOfWeek();\n      break\n    case 'End':\n      this.picker.focusLastDayOfWeek();\n      break\n    case 'PageUp':\n      // eslint-disable-next-line no-unused-expressions\n      event.shiftKey\n        ? this.picker.focusPreviousYear(event)\n        : this.picker.focusPreviousMonth(event);\n      break\n    case 'PageDown':\n      // eslint-disable-next-line no-unused-expressions\n      event.shiftKey\n        ? this.picker.focusNextYear(event)\n        : this.picker.focusNextMonth(event);\n      break\n    default:\n      calendarNavKey = false;\n      break\n  }\n\n  if (calendarNavKey) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n\nexport { DatePicker };\n//# sourceMappingURL=date-picker.mjs.map\n","function FilterToggleButton(options) {\n  this.options = options;\n  this.container = $(this.options.toggleButton.container);\n  this.filterContainer = $(this.options.filter.container);\n\n  this.createToggleButton();\n  this.setupResponsiveChecks();\n  this.filterContainer.attr('tabindex', '-1');\n  if (this.options.startHidden) {\n    this.hideMenu();\n  }\n}\n\nFilterToggleButton.prototype.setupResponsiveChecks = function () {\n  this.mq = window.matchMedia(this.options.bigModeMediaQuery);\n  this.mq.addListener($.proxy(this, 'checkMode'));\n  this.checkMode(this.mq);\n};\n\nFilterToggleButton.prototype.createToggleButton = function () {\n  this.menuButton = $(\n    `<button class=\"govuk-button ${this.options.toggleButton.classes}\" type=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">${this.options.toggleButton.showText}</button>`\n  );\n  this.menuButton.on('click', $.proxy(this, 'onMenuButtonClick'));\n  this.container.append(this.menuButton);\n};\n\nFilterToggleButton.prototype.checkMode = function (mq) {\n  if (mq.matches) {\n    this.enableBigMode();\n  } else {\n    this.enableSmallMode();\n  }\n};\n\nFilterToggleButton.prototype.enableBigMode = function () {\n  this.showMenu();\n  this.removeCloseButton();\n};\n\nFilterToggleButton.prototype.enableSmallMode = function () {\n  this.hideMenu();\n  this.addCloseButton();\n};\n\nFilterToggleButton.prototype.addCloseButton = function () {\n  if (this.options.closeButton) {\n    this.closeButton = $(\n      `<button class=\"moj-filter__close\" type=\"button\">${this.options.closeButton.text}</button>`\n    );\n    this.closeButton.on('click', $.proxy(this, 'onCloseClick'));\n    $(this.options.closeButton.container).append(this.closeButton);\n  }\n};\n\nFilterToggleButton.prototype.onCloseClick = function () {\n  this.hideMenu();\n  this.menuButton.focus();\n};\n\nFilterToggleButton.prototype.removeCloseButton = function () {\n  if (this.closeButton) {\n    this.closeButton.remove();\n    this.closeButton = null;\n  }\n};\n\nFilterToggleButton.prototype.hideMenu = function () {\n  this.menuButton.attr('aria-expanded', 'false');\n  this.filterContainer.addClass('moj-js-hidden');\n  this.menuButton.text(this.options.toggleButton.showText);\n};\n\nFilterToggleButton.prototype.showMenu = function () {\n  this.menuButton.attr('aria-expanded', 'true');\n  this.filterContainer.removeClass('moj-js-hidden');\n  this.menuButton.text(this.options.toggleButton.hideText);\n};\n\nFilterToggleButton.prototype.onMenuButtonClick = function () {\n  this.toggle();\n};\n\nFilterToggleButton.prototype.toggle = function () {\n  if (this.menuButton.attr('aria-expanded') === 'false') {\n    this.showMenu();\n    this.filterContainer.get(0).focus();\n  } else {\n    this.hideMenu();\n  }\n};\n\nexport { FilterToggleButton };\n//# sourceMappingURL=filter-toggle-button.mjs.map\n","import { dragAndDropSupported, formDataSupported, fileApiSupported } from '../../helpers.mjs';\n\nfunction MultiFileUpload(params) {\n  if (!(dragAndDropSupported() && formDataSupported() && fileApiSupported())) {\n    return\n  }\n\n  this.defaultParams = {\n    uploadFileEntryHook: $.noop,\n    uploadFileExitHook: $.noop,\n    uploadFileErrorHook: $.noop,\n    fileDeleteHook: $.noop,\n    uploadStatusText: 'Uploading files, please wait',\n    dropzoneHintText: 'Drag and drop files here or',\n    dropzoneButtonText: 'Choose files'\n  };\n\n  this.params = $.extend({}, this.defaultParams, params);\n  this.container = $(this.params.container);\n\n  this.container.addClass('moj-multi-file-upload--enhanced');\n\n  this.feedbackContainer = this.container.find(\n    '.moj-multi-file__uploaded-files'\n  );\n  this.setupFileInput();\n  this.setupDropzone();\n  this.setupLabel();\n  this.setupStatusBox();\n  this.container.on(\n    'click',\n    '.moj-multi-file-upload__delete',\n    $.proxy(this, 'onFileDeleteClick')\n  );\n}\n\nMultiFileUpload.prototype.setupDropzone = function () {\n  this.fileInput.wrap('<div class=\"moj-multi-file-upload__dropzone\" />');\n  this.dropzone = this.container.find('.moj-multi-file-upload__dropzone');\n  this.dropzone.on('dragover', $.proxy(this, 'onDragOver'));\n  this.dropzone.on('dragleave', $.proxy(this, 'onDragLeave'));\n  this.dropzone.on('drop', $.proxy(this, 'onDrop'));\n};\n\nMultiFileUpload.prototype.setupLabel = function () {\n  this.label = $(\n    `<label for=\"${this.fileInput[0].id}\" class=\"govuk-button govuk-button--secondary\">${this.params.dropzoneButtonText}</label>`\n  );\n  this.dropzone.append(\n    `<p class=\"govuk-body\">${this.params.dropzoneHintText}</p>`\n  );\n  this.dropzone.append(this.label);\n};\n\nMultiFileUpload.prototype.setupFileInput = function () {\n  this.fileInput = this.container.find('.moj-multi-file-upload__input');\n  this.fileInput.on('change', $.proxy(this, 'onFileChange'));\n  this.fileInput.on('focus', $.proxy(this, 'onFileFocus'));\n  this.fileInput.on('blur', $.proxy(this, 'onFileBlur'));\n};\n\nMultiFileUpload.prototype.setupStatusBox = function () {\n  this.status = $(\n    '<div aria-live=\"polite\" role=\"status\" class=\"govuk-visually-hidden\" />'\n  );\n  this.dropzone.append(this.status);\n};\n\nMultiFileUpload.prototype.onDragOver = function (e) {\n  e.preventDefault();\n  this.dropzone.addClass('moj-multi-file-upload--dragover');\n};\n\nMultiFileUpload.prototype.onDragLeave = function () {\n  this.dropzone.removeClass('moj-multi-file-upload--dragover');\n};\n\nMultiFileUpload.prototype.onDrop = function (e) {\n  e.preventDefault();\n  this.dropzone.removeClass('moj-multi-file-upload--dragover');\n  this.feedbackContainer.removeClass('moj-hidden');\n  this.status.html(this.params.uploadStatusText);\n  this.uploadFiles(e.originalEvent.dataTransfer.files);\n};\n\nMultiFileUpload.prototype.uploadFiles = function (files) {\n  for (let i = 0; i < files.length; i++) {\n    this.uploadFile(files[i]);\n  }\n};\n\nMultiFileUpload.prototype.onFileChange = function (e) {\n  this.feedbackContainer.removeClass('moj-hidden');\n  this.status.html(this.params.uploadStatusText);\n  this.uploadFiles(e.currentTarget.files);\n  this.fileInput.replaceWith($(e.currentTarget).val('').clone(true));\n  this.setupFileInput();\n  this.fileInput.get(0).focus();\n};\n\nMultiFileUpload.prototype.onFileFocus = function (e) {\n  this.label.addClass('moj-multi-file-upload--focused');\n};\n\nMultiFileUpload.prototype.onFileBlur = function (e) {\n  this.label.removeClass('moj-multi-file-upload--focused');\n};\n\nMultiFileUpload.prototype.getSuccessHtml = function (success) {\n  return `<span class=\"moj-multi-file-upload__success\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M25,6.2L8.7,23.2L0,14.1l4-4.2l4.7,4.9L21,2L25,6.2z\"/></svg>${success.messageHtml}</span>`\n};\n\nMultiFileUpload.prototype.getErrorHtml = function (error) {\n  return `<span class=\"moj-multi-file-upload__error\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M13.6,15.4h-2.3v-4.5h2.3V15.4z M13.6,19.8h-2.3v-2.2h2.3V19.8z M0,23.2h25L12.5,2L0,23.2z\"/></svg>${error.message}</span>`\n};\n\nMultiFileUpload.prototype.getFileRowHtml = function (file) {\n  const html = `\n    <div class=\"govuk-summary-list__row moj-multi-file-upload__row\">;\n      <div class=\"govuk-summary-list__value moj-multi-file-upload__message\">;\n    <span class=\"moj-multi-file-upload__filename\">${file.name}</span>;\n    <span class=\"moj-multi-file-upload__progress\">0%</span>;\n      </div>';\n      <div class=\"govuk-summary-list__actions moj-multi-file-upload__actions\"></div>;\n    </div>`;\n  return html\n};\n\nMultiFileUpload.prototype.getDeleteButtonHtml = function (file) {\n  return `<button class=\"moj-multi-file-upload__delete govuk-button govuk-button--secondary govuk-!-margin-bottom-0\" type=\"button\" name=\"delete\" value=\"${file.filename}\">\n      Delete <span class=\"govuk-visually-hidden\">${file.originalname}</span>\n    </button>`\n};\n\nMultiFileUpload.prototype.uploadFile = function (file) {\n  this.params.uploadFileEntryHook(this, file);\n  const item = $(this.getFileRowHtml(file));\n  const formData = new FormData();\n  formData.append('documents', file);\n  this.feedbackContainer.find('.moj-multi-file-upload__list').append(item);\n\n  $.ajax({\n    url: this.params.uploadUrl,\n    type: 'post',\n    data: formData,\n    processData: false,\n    contentType: false,\n    success: $.proxy(function (response) {\n      if (response.error) {\n        item\n          .find('.moj-multi-file-upload__message')\n          .html(this.getErrorHtml(response.error));\n        this.status.html(response.error.message);\n      } else {\n        item\n          .find('.moj-multi-file-upload__message')\n          .html(this.getSuccessHtml(response.success));\n        this.status.html(response.success.messageText);\n      }\n      item\n        .find('.moj-multi-file-upload__actions')\n        .append(this.getDeleteButtonHtml(response.file));\n      this.params.uploadFileExitHook(this, file, response);\n    }, this),\n    error: $.proxy(function (jqXHR, textStatus, errorThrown) {\n      this.params.uploadFileErrorHook(\n        this,\n        file,\n        jqXHR,\n        textStatus,\n        errorThrown\n      );\n    }, this),\n    xhr: function () {\n      const xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\n        'progress',\n        function (e) {\n          if (e.lengthComputable) {\n            let percentComplete = e.loaded / e.total;\n            percentComplete = parseInt(percentComplete * 100, 10);\n            item\n              .find('.moj-multi-file-upload__progress')\n              .text(` ${percentComplete}%`);\n          }\n        },\n        false\n      );\n      return xhr\n    }\n  });\n};\n\nMultiFileUpload.prototype.onFileDeleteClick = function (e) {\n  e.preventDefault(); // if user refreshes page and then deletes\n  const button = $(e.currentTarget);\n  const data = {};\n  data[button[0].name] = button[0].value;\n  $.ajax({\n    url: this.params.deleteUrl,\n    type: 'post',\n    dataType: 'json',\n    data,\n    success: $.proxy(function (response) {\n      if (response.error) ; else {\n        button.parents('.moj-multi-file-upload__row').remove();\n        if (\n          this.feedbackContainer.find('.moj-multi-file-upload__row').length ===\n          0\n        ) {\n          this.feedbackContainer.addClass('moj-hidden');\n        }\n      }\n      this.params.fileDeleteHook(this, response);\n    }, this)\n  });\n};\n\nexport { MultiFileUpload };\n//# sourceMappingURL=multi-file-upload.mjs.map\n","function MultiSelect(options) {\n  this.container = $(options.container);\n\n  if (this.container.data('moj-multi-select-initialised')) {\n    return\n  }\n\n  this.container.data('moj-multi-select-initialised', true);\n\n  const idPrefix = options.id_prefix;\n  let allId = 'checkboxes-all';\n  if (typeof idPrefix !== 'undefined') {\n    allId = `${idPrefix}checkboxes-all`;\n  }\n\n  this.toggle = $(this.getToggleHtml(allId));\n  this.toggleButton = this.toggle.find('input');\n  this.toggleButton.on('click', $.proxy(this, 'onButtonClick'));\n  this.container.append(this.toggle);\n  this.checkboxes = $(options.checkboxes);\n  this.checkboxes.on('click', $.proxy(this, 'onCheckboxClick'));\n  this.checked = options.checked || false;\n}\n\nMultiSelect.prototype.getToggleHtml = function (allId) {\n  let html = '';\n  html +=\n    '<div class=\"govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox\">';\n  html += `  <input type=\"checkbox\" class=\"govuk-checkboxes__input\" id=\"${allId}\">`;\n  html += `  <label class=\"govuk-label govuk-checkboxes__label moj-multi-select__toggle-label\" for=\"${allId}\">`;\n  html += '    <span class=\"govuk-visually-hidden\">Select all</span>';\n  html += '  </label>';\n  html += '</div>';\n  return html\n};\n\nMultiSelect.prototype.onButtonClick = function (e) {\n  if (this.checked) {\n    this.uncheckAll();\n    this.toggleButton[0].checked = false;\n  } else {\n    this.checkAll();\n    this.toggleButton[0].checked = true;\n  }\n};\n\nMultiSelect.prototype.checkAll = function () {\n  this.checkboxes.each(\n    $.proxy(function (index, el) {\n      el.checked = true;\n    }, this)\n  );\n  this.checked = true;\n};\n\nMultiSelect.prototype.uncheckAll = function () {\n  this.checkboxes.each(\n    $.proxy(function (index, el) {\n      el.checked = false;\n    }, this)\n  );\n  this.checked = false;\n};\n\nMultiSelect.prototype.onCheckboxClick = function (e) {\n  if (!e.target.checked) {\n    this.toggleButton[0].checked = false;\n    this.checked = false;\n  } else {\n    if (this.checkboxes.filter(':checked').length === this.checkboxes.length) {\n      this.toggleButton[0].checked = true;\n      this.checked = true;\n    }\n  }\n};\n\nexport { MultiSelect };\n//# sourceMappingURL=multi-select.mjs.map\n","function PasswordReveal(element) {\n  this.el = element;\n  const $el = $(this.el);\n\n  if ($el.data('moj-password-reveal-initialised')) {\n    return\n  }\n\n  $el.data('moj-password-reveal-initialised', true);\n  $el.attr('spellcheck', 'false');\n\n  $el.wrap('<div class=\"moj-password-reveal\"></div>');\n  this.container = $(this.el).parent();\n  this.createButton();\n}\n\nPasswordReveal.prototype.createButton = function () {\n  this.button = $(\n    '<button type=\"button\" class=\"govuk-button govuk-button--secondary moj-password-reveal__button\">Show <span class=\"govuk-visually-hidden\">password</span></button>'\n  );\n  this.container.append(this.button);\n  this.button.on('click', $.proxy(this, 'onButtonClick'));\n};\n\nPasswordReveal.prototype.onButtonClick = function () {\n  if (this.el.type === 'password') {\n    this.el.type = 'text';\n    this.button.html('Hide <span class=\"govuk-visually-hidden\">password</span>');\n  } else {\n    this.el.type = 'password';\n    this.button.html('Show <span class=\"govuk-visually-hidden\">password</span>');\n  }\n};\n\nexport { PasswordReveal };\n//# sourceMappingURL=password-reveal.mjs.map\n","function RichTextEditor(options) {\n  if (!('contentEditable' in document.documentElement)) {\n    return\n  }\n\n  this.options = options;\n  this.options.toolbar = this.options.toolbar || {\n    bold: false,\n    italic: false,\n    underline: false,\n    bullets: true,\n    numbers: true\n  };\n  this.textarea = this.options.textarea;\n  this.container = $(this.textarea).parent();\n\n  if (this.container.data('moj-rich-text-editor-initialised')) {\n    return\n  }\n\n  this.container.data('moj-rich-text-editor-initialised', true);\n\n  this.createToolbar();\n  this.hideDefault();\n  this.configureToolbar();\n  this.keys = {\n    left: 37,\n    right: 39,\n    up: 38,\n    down: 40\n  };\n  this.container.on(\n    'click',\n    '.moj-rich-text-editor__toolbar-button',\n    $.proxy(this, 'onButtonClick')\n  );\n  this.container\n    .find('.moj-rich-text-editor__content')\n    .on('input', $.proxy(this, 'onEditorInput'));\n  this.container.find('label').on('click', $.proxy(this, 'onLabelClick'));\n  this.toolbar.on('keydown', $.proxy(this, 'onToolbarKeydown'));\n}\n\nRichTextEditor.prototype.onToolbarKeydown = function (e) {\n  let focusableButton;\n  switch (e.keyCode) {\n    case this.keys.right:\n    case this.keys.down: {\n      focusableButton = this.toolbar.find('button[tabindex=0]');\n      const nextButton = focusableButton.next('button');\n      if (nextButton[0]) {\n        nextButton.focus();\n        focusableButton.attr('tabindex', '-1');\n        nextButton.attr('tabindex', '0');\n      }\n      break\n    }\n    case this.keys.left:\n    case this.keys.up: {\n      focusableButton = this.toolbar.find('button[tabindex=0]');\n      const previousButton = focusableButton.prev('button');\n      if (previousButton[0]) {\n        previousButton.focus();\n        focusableButton.attr('tabindex', '-1');\n        previousButton.attr('tabindex', '0');\n      }\n      break\n    }\n  }\n};\n\nRichTextEditor.prototype.getToolbarHtml = function () {\n  let html = '';\n\n  html += '<div class=\"moj-rich-text-editor__toolbar\" role=\"toolbar\">';\n\n  if (this.options.toolbar.bold) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--bold\" type=\"button\" data-command=\"bold\"><span class=\"govuk-visually-hidden\">Bold</span></button>';\n  }\n\n  if (this.options.toolbar.italic) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--italic\" type=\"button\" data-command=\"italic\"><span class=\"govuk-visually-hidden\">Italic</span></button>';\n  }\n\n  if (this.options.toolbar.underline) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--underline\" type=\"button\" data-command=\"underline\"><span class=\"govuk-visually-hidden\">Underline</span></button>';\n  }\n\n  if (this.options.toolbar.bullets) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--unordered-list\" type=\"button\" data-command=\"insertUnorderedList\"><span class=\"govuk-visually-hidden\">Unordered list</span></button>';\n  }\n\n  if (this.options.toolbar.numbers) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--ordered-list\" type=\"button\" data-command=\"insertOrderedList\"><span class=\"govuk-visually-hidden\">Ordered list</span></button>';\n  }\n\n  html += '</div>';\n  return html\n};\n\nRichTextEditor.prototype.getEnhancedHtml = function (val) {\n  return `${this.getToolbarHtml()}<div class=\"govuk-textarea moj-rich-text-editor__content\" contenteditable=\"true\" spellcheck=\"false\"></div>`\n};\n\nRichTextEditor.prototype.hideDefault = function () {\n  this.textarea = this.container.find('textarea');\n  this.textarea.addClass('govuk-visually-hidden');\n  this.textarea.attr('aria-hidden', true);\n  this.textarea.attr('tabindex', '-1');\n};\n\nRichTextEditor.prototype.createToolbar = function () {\n  this.toolbar = document.createElement('div');\n  this.toolbar.className = 'moj-rich-text-editor';\n  this.toolbar.innerHTML = this.getEnhancedHtml();\n  this.container.append(this.toolbar);\n  this.toolbar = this.container.find('.moj-rich-text-editor__toolbar');\n  this.container\n    .find('.moj-rich-text-editor__content')\n    .html(this.textarea.val());\n};\n\nRichTextEditor.prototype.configureToolbar = function () {\n  this.buttons = this.container.find('.moj-rich-text-editor__toolbar-button');\n  this.buttons.prop('tabindex', '-1');\n  const firstTab = this.buttons.first();\n  firstTab.prop('tabindex', '0');\n};\n\nRichTextEditor.prototype.onButtonClick = function (e) {\n  document.execCommand($(e.currentTarget).data('command'), false, null);\n};\n\nRichTextEditor.prototype.getContent = function () {\n  return this.container.find('.moj-rich-text-editor__content').html()\n};\n\nRichTextEditor.prototype.onEditorInput = function (e) {\n  this.updateTextarea();\n};\n\nRichTextEditor.prototype.updateTextarea = function () {\n  document.execCommand('defaultParagraphSeparator', false, 'p');\n  this.textarea.val(this.getContent());\n};\n\nRichTextEditor.prototype.onLabelClick = function (e) {\n  e.preventDefault();\n  this.container.find('.moj-rich-text-editor__content').focus();\n};\n\nexport { RichTextEditor };\n//# sourceMappingURL=rich-text-editor.mjs.map\n","function SearchToggle(options) {\n  this.options = options;\n  this.container = $(this.options.search.container);\n  this.toggleButtonContainer = $(this.options.toggleButton.container);\n\n  if (this.container.data('moj-search-toggle-initialised')) {\n    return\n  }\n\n  this.container.data('moj-search-toggle-initialised', true);\n\n  const svg =\n    '<svg viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"moj-search-toggle__button__icon\"><path d=\"M7.433,12.5790048 C6.06762625,12.5808611 4.75763941,12.0392925 3.79217348,11.0738265 C2.82670755,10.1083606 2.28513891,8.79837375 2.28699522,7.433 C2.28513891,6.06762625 2.82670755,4.75763941 3.79217348,3.79217348 C4.75763941,2.82670755 6.06762625,2.28513891 7.433,2.28699522 C8.79837375,2.28513891 10.1083606,2.82670755 11.0738265,3.79217348 C12.0392925,4.75763941 12.5808611,6.06762625 12.5790048,7.433 C12.5808611,8.79837375 12.0392925,10.1083606 11.0738265,11.0738265 C10.1083606,12.0392925 8.79837375,12.5808611 7.433,12.5790048 L7.433,12.5790048 Z M14.293,12.579 L13.391,12.579 L13.071,12.269 C14.2300759,10.9245158 14.8671539,9.20813198 14.866,7.433 C14.866,3.32786745 11.5381325,-1.65045755e-15 7.433,-1.65045755e-15 C3.32786745,-1.65045755e-15 -1.65045755e-15,3.32786745 -1.65045755e-15,7.433 C-1.65045755e-15,11.5381325 3.32786745,14.866 7.433,14.866 C9.208604,14.8671159 10.9253982,14.2296624 12.27,13.07 L12.579,13.39 L12.579,14.294 L18.296,20 L20,18.296 L14.294,12.579 L14.293,12.579 Z\"></path></svg>';\n\n  this.toggleButton = $(\n    `<button class=\"moj-search-toggle__button\" type=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      ${this.options.toggleButton.text} ${svg}\n    </button>`\n  );\n  this.toggleButton.on('click', $.proxy(this, 'onToggleButtonClick'));\n  this.toggleButtonContainer.append(this.toggleButton);\n  $(document).on('click', this.onDocumentClick.bind(this));\n  $(document).on('focusin', this.onDocumentClick.bind(this));\n}\n\nSearchToggle.prototype.showMenu = function () {\n  this.toggleButton.attr('aria-expanded', 'true');\n  this.container.removeClass('moj-js-hidden');\n  this.container.find('input').first().get(0).focus();\n};\n\nSearchToggle.prototype.hideMenu = function () {\n  this.container.addClass('moj-js-hidden');\n  this.toggleButton.attr('aria-expanded', 'false');\n};\n\nSearchToggle.prototype.onToggleButtonClick = function () {\n  if (this.toggleButton.attr('aria-expanded') === 'false') {\n    this.showMenu();\n  } else {\n    this.hideMenu();\n  }\n};\n\nSearchToggle.prototype.onDocumentClick = function (e) {\n  if (\n    !$.contains(this.toggleButtonContainer[0], e.target) &&\n    !$.contains(this.container[0], e.target)\n  ) {\n    this.hideMenu();\n  }\n};\n\nexport { SearchToggle };\n//# sourceMappingURL=search-toggle.mjs.map\n","function SortableTable(params) {\n  this.table = $(params.table);\n\n  if (this.table.data('moj-search-toggle-initialised')) {\n    return\n  }\n\n  this.table.data('moj-search-toggle-initialised', true);\n\n  this.setupOptions(params);\n  this.body = this.table.find('tbody');\n  this.createHeadingButtons();\n  this.createStatusBox();\n  this.initialiseSortedColumn();\n  this.table.on('click', 'th button', $.proxy(this, 'onSortButtonClick'));\n}\n\nSortableTable.prototype.setupOptions = function (params) {\n  params = params || {};\n  this.statusMessage = params.statusMessage || 'Sort by %heading% (%direction%)';\n  this.ascendingText = params.ascendingText || 'ascending';\n  this.descendingText = params.descendingText || 'descending';\n};\n\nSortableTable.prototype.createHeadingButtons = function () {\n  const headings = this.table.find('thead th');\n  let heading;\n  for (let i = 0; i < headings.length; i++) {\n    heading = $(headings[i]);\n    if (heading.attr('aria-sort')) {\n      this.createHeadingButton(heading, i);\n    }\n  }\n};\n\nSortableTable.prototype.createHeadingButton = function (heading, i) {\n  const text = heading.text();\n  const button = $(`<button type=\"button\" data-index=\"${i}\">${text}</button>`);\n  heading.text('');\n  heading.append(button);\n};\n\nSortableTable.prototype.createStatusBox = function () {\n  this.status = $(\n    '<div aria-live=\"polite\" role=\"status\" aria-atomic=\"true\" class=\"govuk-visually-hidden\" />'\n  );\n  this.table.parent().append(this.status);\n};\n\nSortableTable.prototype.initialiseSortedColumn = function () {\n  const rows = this.getTableRowsArray();\n\n  this.table\n    .find('th')\n    .filter('[aria-sort=\"ascending\"], [aria-sort=\"descending\"]')\n    .first()\n    .each((index, el) => {\n      const sortDirection = $(el).attr('aria-sort');\n      const columnNumber = $(el).find('button').attr('data-index');\n      const sortedRows = this.sort(rows, columnNumber, sortDirection);\n      this.addRows(sortedRows);\n    });\n};\n\nSortableTable.prototype.onSortButtonClick = function (e) {\n  const columnNumber = e.currentTarget.getAttribute('data-index');\n  const sortDirection = $(e.currentTarget).parent().attr('aria-sort');\n  let newSortDirection;\n  if (sortDirection === 'none' || sortDirection === 'descending') {\n    newSortDirection = 'ascending';\n  } else {\n    newSortDirection = 'descending';\n  }\n  const rows = this.getTableRowsArray();\n  const sortedRows = this.sort(rows, columnNumber, newSortDirection);\n  this.addRows(sortedRows);\n  this.removeButtonStates();\n  this.updateButtonState($(e.currentTarget), newSortDirection);\n};\n\nSortableTable.prototype.updateButtonState = function (button, direction) {\n  button.parent().attr('aria-sort', direction);\n  let message = this.statusMessage;\n  message = message.replace(/%heading%/, button.text());\n  message = message.replace(/%direction%/, this[`${direction}Text`]);\n  this.status.text(message);\n};\n\nSortableTable.prototype.removeButtonStates = function () {\n  this.table.find('thead th').attr('aria-sort', 'none');\n};\n\nSortableTable.prototype.addRows = function (rows) {\n  for (let i = 0; i < rows.length; i++) {\n    this.body.append(rows[i]);\n  }\n};\n\nSortableTable.prototype.getTableRowsArray = function () {\n  const rows = [];\n  const trs = this.body.find('tr');\n  for (let i = 0; i < trs.length; i++) {\n    rows.push(trs[i]);\n  }\n  return rows\n};\n\nSortableTable.prototype.sort = function (rows, columnNumber, sortDirection) {\n  const newRows = rows.sort(\n    function (rowA, rowB) {\n      const tdA = $(rowA).find('td,th').eq(columnNumber);\n      const tdB = $(rowB).find('td,th').eq(columnNumber);\n\n      const valueA =\n        sortDirection === 'ascending'\n          ? this.getCellValue(tdA)\n          : this.getCellValue(tdB);\n      const valueB =\n        sortDirection === 'ascending'\n          ? this.getCellValue(tdB)\n          : this.getCellValue(tdA);\n\n      if (typeof valueA === 'string' || typeof valueB === 'string')\n        return valueA.toString().localeCompare(valueB.toString())\n      return valueA - valueB\n    }.bind(this)\n  );\n  return newRows\n};\n\nSortableTable.prototype.getCellValue = function (cell) {\n  const val = cell.attr('data-sort-value') || cell.html();\n\n  const valAsNumber = Number(val);\n  return isNaN(valAsNumber) ? val : valAsNumber\n};\n\nexport { SortableTable };\n//# sourceMappingURL=sortable-table.mjs.map\n","import { AddAnother } from './components/add-another/add-another.mjs';\nimport { Alert } from './components/alert/alert.mjs';\nimport { ButtonMenu } from './components/button-menu/button-menu.mjs';\nimport { DatePicker } from './components/date-picker/date-picker.mjs';\nexport { FilterToggleButton } from './components/filter-toggle-button/filter-toggle-button.mjs';\nexport { MultiFileUpload } from './components/multi-file-upload/multi-file-upload.mjs';\nimport { MultiSelect } from './components/multi-select/multi-select.mjs';\nimport { PasswordReveal } from './components/password-reveal/password-reveal.mjs';\nimport { RichTextEditor } from './components/rich-text-editor/rich-text-editor.mjs';\nimport { SearchToggle } from './components/search-toggle/search-toggle.mjs';\nimport { SortableTable } from './components/sortable-table/sortable-table.mjs';\nimport { nodeListForEach } from './helpers.mjs';\nexport { version } from './version.mjs';\n\n/* eslint-disable no-new */\n\n\nfunction initAll(options) {\n  // Set the options to an empty object by default if no options are passed.\n  options = typeof options !== 'undefined' ? options : {};\n\n  // Allow the user to initialise MOJ Frontend in only certain sections of the page\n  // Defaults to the entire document if nothing is set.\n  const scope = typeof options.scope !== 'undefined' ? options.scope : document;\n\n  const $addAnothers = scope.querySelectorAll('[data-module=\"moj-add-another\"]');\n\n  nodeListForEach($addAnothers, function ($addAnother) {\n    new AddAnother($addAnother);\n  });\n\n  const $multiSelects = scope.querySelectorAll(\n    '[data-module=\"moj-multi-select\"]'\n  );\n\n  nodeListForEach($multiSelects, function ($multiSelect) {\n    new MultiSelect({\n      container: $multiSelect.querySelector(\n        $multiSelect.getAttribute('data-multi-select-checkbox')\n      ),\n      checkboxes: $multiSelect.querySelectorAll(\n        'tbody .govuk-checkboxes__input'\n      ),\n      id_prefix: $multiSelect.getAttribute('data-multi-select-idprefix')\n    });\n  });\n\n  const $passwordReveals = scope.querySelectorAll(\n    '[data-module=\"moj-password-reveal\"]'\n  );\n\n  nodeListForEach($passwordReveals, function ($passwordReveal) {\n    new PasswordReveal($passwordReveal);\n  });\n\n  const $richTextEditors = scope.querySelectorAll(\n    '[data-module=\"moj-rich-text-editor\"]'\n  );\n\n  nodeListForEach($richTextEditors, function ($richTextEditor) {\n    const options = {\n      textarea: $($richTextEditor)\n    };\n\n    const toolbarAttr = $richTextEditor.getAttribute(\n      'data-moj-rich-text-editor-toolbar'\n    );\n\n    if (toolbarAttr) {\n      const toolbar = toolbarAttr.split(',');\n\n      options.toolbar = {};\n\n      for (const item in toolbar) {\n        options.toolbar[toolbar[item]] = true;\n      }\n    }\n\n    new RichTextEditor(options);\n  });\n\n  const $searchToggles = scope.querySelectorAll(\n    '[data-module=\"moj-search-toggle\"]'\n  );\n\n  nodeListForEach($searchToggles, function ($searchToggle) {\n    new SearchToggle({\n      toggleButton: {\n        container: $($searchToggle.querySelector('.moj-search-toggle__toggle')),\n        text: $searchToggle.getAttribute('data-moj-search-toggle-text')\n      },\n      search: {\n        container: $($searchToggle.querySelector('.moj-search'))\n      }\n    });\n  });\n\n  const $sortableTables = scope.querySelectorAll(\n    '[data-module=\"moj-sortable-table\"]'\n  );\n\n  nodeListForEach($sortableTables, function ($table) {\n    new SortableTable({\n      table: $table\n    });\n  });\n\n  const $datepickers = scope.querySelectorAll('[data-module=\"moj-date-picker\"]');\n\n  nodeListForEach($datepickers, function ($datepicker) {\n    new DatePicker($datepicker, {}).init();\n  });\n\n  const $buttonMenus = scope.querySelectorAll('[data-module=\"moj-button-menu\"]');\n\n  nodeListForEach($buttonMenus, function ($buttonmenu) {\n    new ButtonMenu($buttonmenu, {}).init();\n  });\n\n  const $alerts = scope.querySelectorAll('[data-module=\"moj-alert\"]');\n  nodeListForEach($alerts, function ($alert) {\n    new Alert($alert, {}).init();\n  });\n}\n\nexport { AddAnother, Alert, ButtonMenu, DatePicker, MultiSelect, PasswordReveal, RichTextEditor, SearchToggle, SortableTable, initAll };\n//# sourceMappingURL=all.mjs.map\n","const version = '0.0.0-development';\n\nexport { version };\n//# sourceMappingURL=version.mjs.map\n"],"names":["AddAnother","container","this","$","data","on","proxy","find","prop","nodeListForEach","nodes","callback","window","NodeList","prototype","forEach","i","length","call","setFocus","$element","options","isFocusable","getAttribute","onBlur","removeAttribute","setAttribute","addEventListener","once","onBeforeFocus","focus","Alert","$module","config","schema","Object","freeze","properties","dismissible","type","dismissText","disableAutoFocus","focusOnDismissSelector","mergeConfigs","parseDataset","dataset","ButtonMenu","buttonText","buttonClasses","alignMenu","DatePicker","excludedDates","excludedDays","leadingZeros","maxDate","minDate","weekStartDay","dayLabels","monthLabels","currentDate","Date","setHours","calendarDays","buttonClass","selectedDayButtonClass","currentDayButtonClass","todayButtonClass","$input","querySelector","DSCalendarDay","button","index","row","column","picker","date","FilterToggleButton","toggleButton","filterContainer","filter","createToggleButton","setupResponsiveChecks","attr","startHidden","hideMenu","MultiFileUpload","params","document","createElement","ondrop","FormData","input","files","fileApiSupported","defaultParams","uploadFileEntryHook","noop","uploadFileExitHook","uploadFileErrorHook","fileDeleteHook","uploadStatusText","dropzoneHintText","dropzoneButtonText","extend","addClass","feedbackContainer","setupFileInput","setupDropzone","setupLabel","setupStatusBox","MultiSelect","idPrefix","id_prefix","allId","toggle","getToggleHtml","append","checkboxes","checked","PasswordReveal","element","el","$el","wrap","parent","createButton","RichTextEditor","documentElement","toolbar","bold","italic","underline","bullets","numbers","textarea","createToolbar","hideDefault","configureToolbar","keys","left","right","up","down","SearchToggle","search","toggleButtonContainer","text","onDocumentClick","bind","SortableTable","table","setupOptions","body","createHeadingButtons","createStatusBox","initialiseSortedColumn","onAddButtonClick","e","item","getNewItem","updateAttributes","getItems","resetItem","firstItem","first","hasRemoveButton","createRemoveButton","last","after","clone","each","originalId","id","name","replace","siblings","parents","htmlFor","value","onRemoveButtonClick","currentTarget","remove","items","focusHeading","get","init","$dismissButton","innerHTML","event","contains","target","dimiss","$elementToRecieveFocus","$nextSibling","nextElementSibling","matches","selector","$sibling","previousElementSibling","getPreviousSibling","$currentElement","parentElement","findNearestMatchingElement","normaliseString","property","trimmedValue","trim","output","outputType","includes","isFinite","Number","parsed","field","entries","configObjects","formattedConfigObject","configObject","key","option","override","children","classList","className","startsWith","add","split","initMenu","$menu","createMenu","insertAdjacentHTML","toggleTemplate","setupMenuItems","$menuToggle","querySelectorAll","toggleMenu","handleKeyDown","closeMenu","hidden","appendChild","firstChild","Array","from","listItem","insertBefore","tagName","setTimeout","isOpen","preventDefault","focusIndex","detail","openMenu","focusItem","moveFocus","menuItem","currentFocusIndex","activeElement","indexOf","initialized","setOptions","initControls","$dialog","createDialog","createCalendarHeaders","$componentWrapper","$inputWrapper","parentNode","insertAdjacentElement","$calendarButton","$dialogTitle","createCalendar","$prevMonthButton","$prevYearButton","$nextMonthButton","$nextYearButton","$cancelButton","$okButton","focusPreviousMonth","focusPreviousYear","focusNextMonth","focusNextYear","closeDialog","selectDate","dialogButtons","$firstButtonInDialog","$lastButtonInDialog","firstButtonKeydown","lastButtonKeydown","toggleDialog","stopPropagation","backgroundClick","updateCalendar","titleId","dialogTemplate","$tbody","dayCount","$row","insertRow","j","$cell","$dateButton","calendarDay","push","day","html","substring","ret","toString","setMinAndMaxDatesOnCalendar","setExcludedDates","setExcludedDays","setLeadingZeros","setWeekStartDay","formattedDateFromString","map","parseDateRangeString","flat","datestring","dates","startDate","endDate","d","getTime","setDate","getDate","weekDays","toLowerCase","unshift","pop","weekStartDayParam","isExcludedDate","excludedDate","toDateString","getDay","dateString","fallback","formattedDate","dateFormatPattern","test","match","month","year","isNaN","formattedDateFromDate","getMonth","getFullYear","formattedDateHuman","shiftKey","firstOfMonth","dayOfWeek","thisDay","disabled","update","setCurrentDate","calendarDayDate","today","inputDate","enabledDays","getComputedStyle","display","innerText","changeEvent","Event","bubbles","cancelable","dispatchEvent","openDialog","offsetWidth","style","top","offsetHeight","goToDate","current","focusNextDay","focusPreviousDay","focusNextWeek","focusPreviousWeek","focusFirstDayOfWeek","firstDayOfWeekIndex","diff","focusLastDayOfWeek","lastDayOfWeekIndex","setMonth","setFullYear","keyPress","click","label","accessibleLabel","calendarNavKey","mq","matchMedia","bigModeMediaQuery","addListener","checkMode","menuButton","classes","showText","enableBigMode","enableSmallMode","showMenu","removeCloseButton","addCloseButton","closeButton","onCloseClick","removeClass","hideText","onMenuButtonClick","fileInput","dropzone","status","onDragOver","onDragLeave","onDrop","uploadFiles","originalEvent","dataTransfer","uploadFile","onFileChange","replaceWith","val","onFileFocus","onFileBlur","getSuccessHtml","success","messageHtml","getErrorHtml","error","message","getFileRowHtml","file","getDeleteButtonHtml","filename","originalname","formData","ajax","url","uploadUrl","processData","contentType","response","messageText","jqXHR","textStatus","errorThrown","xhr","XMLHttpRequest","upload","lengthComputable","percentComplete","loaded","total","parseInt","onFileDeleteClick","deleteUrl","dataType","onButtonClick","uncheckAll","checkAll","onCheckboxClick","onToolbarKeydown","focusableButton","keyCode","nextButton","next","previousButton","prev","getToolbarHtml","getEnhancedHtml","buttons","execCommand","getContent","onEditorInput","updateTextarea","onLabelClick","onToggleButtonClick","statusMessage","ascendingText","descendingText","headings","heading","createHeadingButton","rows","getTableRowsArray","sortDirection","columnNumber","sortedRows","sort","addRows","onSortButtonClick","newSortDirection","removeButtonStates","updateButtonState","direction","trs","rowA","rowB","tdA","eq","tdB","valueA","getCellValue","valueB","localeCompare","cell","valAsNumber","exports","initAll","scope","$addAnother","$multiSelect","$passwordReveal","$richTextEditor","toolbarAttr","$searchToggle","$table","$datepicker","$buttonmenu","$alert","version"],"mappings":"kQAAA,SAASA,EAAWC,GAClBC,KAAKD,UAAYE,EAAEF,GAEfC,KAAKD,UAAUG,KAAK,iCAIxBF,KAAKD,UAAUG,KAAK,+BAA+B,GAEnDF,KAAKD,UAAUI,GACb,QACA,kCACAF,EAAEG,MAAMJ,KAAM,wBAEhBA,KAAKD,UAAUI,GACb,QACA,+BACAF,EAAEG,MAAMJ,KAAM,qBAEhBA,KAAKD,UACFM,KAAK,gEACLC,KAAK,OAAQ,UAClB,CCPA,SAASC,EAAgBC,EAAOC,GAC9B,GAAIC,OAAOC,SAASC,UAAUC,QAC5B,OAAOL,EAAMK,QAAQJ,GAEvB,IAAK,IAAIK,EAAI,EAAGA,EAAIN,EAAMO,OAAQD,IAChCL,EAASO,KAAKN,OAAQF,EAAMM,GAAIA,EAAGN,EAEvC,CA+DA,SAASS,EAASC,EAAUC,EAAU,IACpC,MAAMC,EAAcF,EAASG,aAAa,YAgB1C,SAASC,IACHH,EAAQG,QACVH,EAAQG,OAAON,KAAKE,GAGjBE,GACHF,EAASK,gBAAgB,WAE/B,CAtBOH,GACHF,EAASM,aAAa,WAAY,MAwBpCN,EAASO,iBAAiB,SAlB1B,WACEP,EAASO,iBAAiB,OAAQH,EAAQ,CAAEI,MAAM,GACtD,GAgB8C,CAAEA,MAAM,IAGhDP,EAAQQ,eACVR,EAAQQ,cAAcX,KAAKE,GAE7BA,EAASU,OACX,CCzGA,SAASC,EAAMC,EAASC,EAAS,IAC/B,IAAKD,EACH,OAAO9B,KAGT,MAAMgC,EAASC,OAAOC,OAAO,CAC3BC,WAAY,CACVC,YAAa,CAAEC,KAAM,WACrBC,YAAa,CAAED,KAAM,UACrBE,iBAAkB,CAAEF,KAAM,WAC1BG,uBAAwB,CAAEH,KAAM,aAWpCrC,KAAK+B,OAAS/B,KAAKyC,aAPF,CACfL,aAAa,EACbE,YAAa,UACbC,kBAAkB,GAMlBR,EACA/B,KAAK0C,aAAaV,EAAQF,EAAQa,UAGpC3C,KAAK8B,QAAUA,CACjB,CC/BA,SAASc,EAAWd,EAASC,EAAS,IACpC,IAAKD,EACH,OAAO9B,KAGT,MAAMgC,EAASC,OAAOC,OAAO,CAC3BC,WAAY,CACVU,WAAY,CAAER,KAAM,UACpBS,cAAe,CAAET,KAAM,UACvBU,UAAW,CAAEV,KAAM,aAUvBrC,KAAK+B,OAAS/B,KAAKyC,aANF,CACfI,WAAY,UACZE,UAAW,OACXD,cAAe,IAKff,EACA/B,KAAK0C,aAAaV,EAAQF,EAAQa,UAGpC3C,KAAK8B,QAAUA,CACjB,CCrBA,SAASkB,EAAWlB,EAASC,EAAS,IACpC,IAAKD,EACH,OAAO9B,KAGT,MAAMgC,EAASC,OAAOC,OAAO,CAC3BC,WAAY,CACVc,cAAe,CAAEZ,KAAM,UACvBa,aAAc,CAAEb,KAAM,UACtBc,aAAc,CAAEd,KAAM,UACtBe,QAAS,CAAEf,KAAM,UACjBgB,QAAS,CAAEhB,KAAM,UACjBiB,aAAc,CAAEjB,KAAM,aAU1BrC,KAAK+B,OAAS/B,KAAKyC,aANF,CACfU,cAAc,EACdG,aAAc,UAMdvB,EACA/B,KAAK0C,aAAaV,EAAQF,EAAQa,UAGpC3C,KAAKuD,UAAY,CACf,SACA,UACA,YACA,WACA,SACA,WACA,UAGFvD,KAAKwD,YAAc,CACjB,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAGFxD,KAAKyD,YAAc,IAAIC,KACvB1D,KAAKyD,YAAYE,SAAS,EAAG,EAAG,EAAG,GACnC3D,KAAK4D,aAAe,GACpB5D,KAAKiD,cAAgB,GACrBjD,KAAKkD,aAAe,GAEpBlD,KAAK6D,YAAc,yBACnB7D,KAAK8D,uBAAyB,mCAC9B9D,KAAK+D,sBAAwB,kCAC7B/D,KAAKgE,iBAAmB,gCAExBhE,KAAK8B,QAAUA,EACf9B,KAAKiE,OAASnC,EAAQoC,cAAc,2BACtC,CA6vBA,SAASC,EAAcC,EAAQC,EAAOC,EAAKC,EAAQC,GACjDxE,KAAKqE,MAAQA,EACbrE,KAAKsE,IAAMA,EACXtE,KAAKuE,OAASA,EACdvE,KAAKoE,OAASA,EACdpE,KAAKwE,OAASA,EAEdxE,KAAKyE,KAAO,IAAIf,IAClB,CCx1BA,SAASgB,EAAmBvD,GAC1BnB,KAAKmB,QAAUA,EACfnB,KAAKD,UAAYE,EAAED,KAAKmB,QAAQwD,aAAa5E,WAC7CC,KAAK4E,gBAAkB3E,EAAED,KAAKmB,QAAQ0D,OAAO9E,WAE7CC,KAAK8E,qBACL9E,KAAK+E,wBACL/E,KAAK4E,gBAAgBI,KAAK,WAAY,MAClChF,KAAKmB,QAAQ8D,aACfjF,KAAKkF,UAET,CCTA,SAASC,EAAgBC,QLAM,IADjBC,SAASC,cAAc,OACjBC,QAIS,mBAAbC,UAGhB,WACE,MAAMC,EAAQJ,SAASC,cAAc,SAErC,OADAG,EAAMpD,KAAO,YACiB,IAAhBoD,EAAMC,KACtB,CKVyDC,KAIvD3F,KAAK4F,cAAgB,CACnBC,oBAAqB5F,EAAE6F,KACvBC,mBAAoB9F,EAAE6F,KACtBE,oBAAqB/F,EAAE6F,KACvBG,eAAgBhG,EAAE6F,KAClBI,iBAAkB,+BAClBC,iBAAkB,8BAClBC,mBAAoB,gBAGtBpG,KAAKoF,OAASnF,EAAEoG,OAAO,CAAA,EAAIrG,KAAK4F,cAAeR,GAC/CpF,KAAKD,UAAYE,EAAED,KAAKoF,OAAOrF,WAE/BC,KAAKD,UAAUuG,SAAS,mCAExBtG,KAAKuG,kBAAoBvG,KAAKD,UAAUM,KACtC,mCAEFL,KAAKwG,iBACLxG,KAAKyG,gBACLzG,KAAK0G,aACL1G,KAAK2G,iBACL3G,KAAKD,UAAUI,GACb,QACA,iCACAF,EAAEG,MAAMJ,KAAM,sBAElB,CClCA,SAAS4G,EAAYzF,GAGnB,GAFAnB,KAAKD,UAAYE,EAAEkB,EAAQpB,WAEvBC,KAAKD,UAAUG,KAAK,gCACtB,OAGFF,KAAKD,UAAUG,KAAK,gCAAgC,GAEpD,MAAM2G,EAAW1F,EAAQ2F,UACzB,IAAIC,EAAQ,sBACY,IAAbF,IACTE,EAAQ,GAAGF,mBAGb7G,KAAKgH,OAAS/G,EAAED,KAAKiH,cAAcF,IACnC/G,KAAK2E,aAAe3E,KAAKgH,OAAO3G,KAAK,SACrCL,KAAK2E,aAAaxE,GAAG,QAASF,EAAEG,MAAMJ,KAAM,kBAC5CA,KAAKD,UAAUmH,OAAOlH,KAAKgH,QAC3BhH,KAAKmH,WAAalH,EAAEkB,EAAQgG,YAC5BnH,KAAKmH,WAAWhH,GAAG,QAASF,EAAEG,MAAMJ,KAAM,oBAC1CA,KAAKoH,QAAUjG,EAAQiG,UAAW,CACpC,CCtBA,SAASC,EAAeC,GACtBtH,KAAKuH,GAAKD,EACV,MAAME,EAAMvH,EAAED,KAAKuH,IAEfC,EAAItH,KAAK,qCAIbsH,EAAItH,KAAK,mCAAmC,GAC5CsH,EAAIxC,KAAK,aAAc,SAEvBwC,EAAIC,KAAK,2CACTzH,KAAKD,UAAYE,EAAED,KAAKuH,IAAIG,SAC5B1H,KAAK2H,eACP,CCdA,SAASC,EAAezG,GAChB,oBAAqBkE,SAASwC,kBAIpC7H,KAAKmB,QAAUA,EACfnB,KAAKmB,QAAQ2G,QAAU9H,KAAKmB,QAAQ2G,SAAW,CAC7CC,MAAM,EACNC,QAAQ,EACRC,WAAW,EACXC,SAAS,EACTC,SAAS,GAEXnI,KAAKoI,SAAWpI,KAAKmB,QAAQiH,SAC7BpI,KAAKD,UAAYE,EAAED,KAAKoI,UAAUV,SAE9B1H,KAAKD,UAAUG,KAAK,sCAIxBF,KAAKD,UAAUG,KAAK,oCAAoC,GAExDF,KAAKqI,gBACLrI,KAAKsI,cACLtI,KAAKuI,mBACLvI,KAAKwI,KAAO,CACVC,KAAM,GACNC,MAAO,GACPC,GAAI,GACJC,KAAM,IAER5I,KAAKD,UAAUI,GACb,QACA,wCACAF,EAAEG,MAAMJ,KAAM,kBAEhBA,KAAKD,UACFM,KAAK,kCACLF,GAAG,QAASF,EAAEG,MAAMJ,KAAM,kBAC7BA,KAAKD,UAAUM,KAAK,SAASF,GAAG,QAASF,EAAEG,MAAMJ,KAAM,iBACvDA,KAAK8H,QAAQ3H,GAAG,UAAWF,EAAEG,MAAMJ,KAAM,sBAC3C,CCzCA,SAAS6I,EAAa1H,GAKpB,GAJAnB,KAAKmB,QAAUA,EACfnB,KAAKD,UAAYE,EAAED,KAAKmB,QAAQ2H,OAAO/I,WACvCC,KAAK+I,sBAAwB9I,EAAED,KAAKmB,QAAQwD,aAAa5E,WAErDC,KAAKD,UAAUG,KAAK,iCACtB,OAGFF,KAAKD,UAAUG,KAAK,iCAAiC,GAKrDF,KAAK2E,aAAe1E,EAClB,8GACID,KAAKmB,QAAQwD,aAAaqE,mrCAGhChJ,KAAK2E,aAAaxE,GAAG,QAASF,EAAEG,MAAMJ,KAAM,wBAC5CA,KAAK+I,sBAAsB7B,OAAOlH,KAAK2E,cACvC1E,EAAEoF,UAAUlF,GAAG,QAASH,KAAKiJ,gBAAgBC,KAAKlJ,OAClDC,EAAEoF,UAAUlF,GAAG,UAAWH,KAAKiJ,gBAAgBC,KAAKlJ,MACtD,CCvBA,SAASmJ,EAAc/D,GACrBpF,KAAKoJ,MAAQnJ,EAAEmF,EAAOgE,OAElBpJ,KAAKoJ,MAAMlJ,KAAK,mCAIpBF,KAAKoJ,MAAMlJ,KAAK,iCAAiC,GAEjDF,KAAKqJ,aAAajE,GAClBpF,KAAKsJ,KAAOtJ,KAAKoJ,MAAM/I,KAAK,SAC5BL,KAAKuJ,uBACLvJ,KAAKwJ,kBACLxJ,KAAKyJ,yBACLzJ,KAAKoJ,MAAMjJ,GAAG,QAAS,YAAaF,EAAEG,MAAMJ,KAAM,sBACpD,CXSAF,EAAWc,UAAU8I,iBAAmB,SAAUC,GAChD,MAAMC,EAAO5J,KAAK6J,aAClB7J,KAAK8J,iBAAiB9J,KAAK+J,WAAWhJ,OAAQ6I,GAC9C5J,KAAKgK,UAAUJ,GACf,MAAMK,EAAYjK,KAAK+J,WAAWG,QAC7BlK,KAAKmK,gBAAgBF,IACxBjK,KAAKoK,mBAAmBH,GAE1BjK,KAAK+J,WAAWM,OAAOC,MAAMV,GAC7BA,EAAKvJ,KAAK,2BAA2B6J,QAAQtI,OAC/C,EAEA9B,EAAWc,UAAUuJ,gBAAkB,SAAUP,GAC/C,OAAOA,EAAKvJ,KAAK,mCAAmCU,MACtD,EAEAjB,EAAWc,UAAUmJ,SAAW,WAC9B,OAAO/J,KAAKD,UAAUM,KAAK,yBAC7B,EAEAP,EAAWc,UAAUiJ,WAAa,WAChC,MAAMD,EAAO5J,KAAK+J,WAAWG,QAAQK,QAIrC,OAHKvK,KAAKmK,gBAAgBP,IACxB5J,KAAKoK,mBAAmBR,GAEnBA,CACT,EAEA9J,EAAWc,UAAUkJ,iBAAmB,SAAUzF,EAAOuF,GACvDA,EAAKvJ,KAAK,eAAemK,MAAK,SAAU1J,EAAGyG,GACzC,MAAMkD,EAAalD,EAAGmD,GAEtBnD,EAAGoD,KAAO1K,EAAEsH,GACTvC,KAAK,aACL4F,QAAQ,UAAWvG,GACtBkD,EAAGmD,GAAKzK,EAAEsH,GACPvC,KAAK,WACL4F,QAAQ,UAAWvG,IAGpBpE,EAAEsH,GAAIsD,SAAS,SAAS,IACxB5K,EAAEsH,GAAIuD,QAAQ,SAAS,IACvBlB,EAAKvJ,KAAK,SAASoK,OAAgB,IAC/BM,QAAUxD,EAAGmD,EACvB,GACA,EAEA5K,EAAWc,UAAUwJ,mBAAqB,SAAUR,GAClDA,EAAK1C,OACH,oHAEJ,EAEApH,EAAWc,UAAUoJ,UAAY,SAAUJ,GACzCA,EAAKvJ,KAAK,0BAA0BmK,MAAK,SAAUnG,EAAOkD,GACxC,aAAZA,EAAGlF,MAAmC,UAAZkF,EAAGlF,KAC/BkF,EAAGH,SAAU,EAEbG,EAAGyD,MAAQ,EAEjB,GACA,EAEAlL,EAAWc,UAAUqK,oBAAsB,SAAUtB,GACnD1J,EAAE0J,EAAEuB,eAAeJ,QAAQ,0BAA0BK,SACrD,MAAMC,EAAQpL,KAAK+J,WACE,IAAjBqB,EAAMrK,QACRqK,EAAM/K,KAAK,mCAAmC8K,SAEhDC,EAAMZ,KACJvK,EAAEG,OAAM,SAAUiE,EAAOkD,GACvBvH,KAAK8J,iBAAiBzF,EAAOpE,EAAEsH,GACrC,GAAOvH,OAELA,KAAKqL,cACP,EAEAvL,EAAWc,UAAUyK,aAAe,WAClCrL,KAAKD,UAAUM,KAAK,6BAA6BiL,IAAI,GAAG1J,OAC1D,EE1DAC,EAAMjB,UAAU2K,KAAO,WAamB,UAAtCvL,KAAK8B,QAAQT,aAAa,SACzBrB,KAAK+B,OAAOQ,kBAEbtB,EAASjB,KAAK8B,SAGhB9B,KAAKwL,eAAiBxL,KAAK8B,QAAQoC,cAAc,uBAE7ClE,KAAK+B,OAAOK,aAAepC,KAAKwL,iBAClCxL,KAAKwL,eAAeC,UAAYzL,KAAK+B,OAAOO,YAC5CtC,KAAKwL,eAAejK,gBAAgB,UAEpCvB,KAAK8B,QAAQL,iBAAiB,SAAUiK,IAClC1L,KAAKwL,eAAeG,SAASD,EAAME,SACrC5L,KAAK6L,QACb,IAGA,EAKAhK,EAAMjB,UAAUiL,OAAS,WACvB,IAAIC,EAUJ,GAPI9L,KAAK+B,OAAOS,yBACdsJ,EAAyBzG,SAASnB,cAChClE,KAAK+B,OAAOS,0BAKXsJ,EAAwB,CAC3B,MAAMC,EAAe/L,KAAK8B,QAAQkK,mBAC9BD,GAAgBA,EAAaE,QAAQ,gBACvCH,EAAyBC,EAE/B,CAGOD,IACHA,EDpEJ,SAA4B5K,EAAUgL,GACpC,IAAKhL,EAAU,OAEf,IAAIiL,EAAWjL,EAASkL,uBAIxB,KAAOD,GAAU,CACf,GAAIA,EAASF,QAAQC,GAAW,OAAOC,EACvCA,EAAWA,EAASC,sBACxB,CACA,CCyD6BC,CACvBrM,KAAK8B,QACL,uCAMCgK,IACHA,EDhEJ,SAAoC5K,EAAUgL,GAE5C,IAAKhL,EAAU,OAGf,IAAIoL,EAAkBpL,EAEtB,KAAOoL,GAAiB,CAEtB,GAAIA,EAAgBL,QAAQC,GAC1B,OAAOI,EAIT,IAAIH,EAAWG,EAAgBF,uBAC/B,KAAOD,GAAU,CAEf,GAAIA,EAASF,QAAQC,GACnB,OAAOC,EAETA,EAAWA,EAASC,sBAC1B,CAGIE,EAAkBA,EAAgBC,aACtC,CACA,CCsC6BC,CACvBxM,KAAK8B,QACL,uCAKAgK,GACF7K,EAAS6K,GAIX9L,KAAK8B,QAAQqJ,QACf,EAkBAtJ,EAAMjB,UAAU6L,gBAAkB,SAAUzB,EAAO0B,GACjD,MAAMC,EAAe3B,EAAQA,EAAM4B,OAAS,GAE5C,IAAIC,EACAC,EAkBJ,OAjBIJ,GAAYA,EAASrK,OACvByK,EAAaJ,EAASrK,MAInByK,IACC,CAAC,OAAQ,SAASC,SAASJ,KAC7BG,EAAa,WAKXH,EAAa5L,OAAS,GAAKiM,SAASC,OAAON,MAC7CG,EAAa,WAITA,GACN,IAAK,UACHD,EAA0B,SAAjBF,EACT,MAEF,IAAK,SACHE,EAASI,OAAON,GAChB,MAEF,QACEE,EAAS7B,EAGb,OAAO6B,CACT,EAYAhL,EAAMjB,UAAU8B,aAAe,SAAUV,EAAQW,GAC/C,MAAMuK,EAAS,CAAE,EAEjB,IAAK,MAAOC,EAAOT,KAAazK,OAAOmL,QAAQpL,EAAOG,YAChDgL,KAASxK,GACPA,EAAQwK,KACVD,EAAOC,GAASnN,KAAKyM,gBAAgB9J,EAAQwK,GAAQT,IAK3D,OAAOQ,CACT,EAWArL,EAAMjB,UAAU6B,aAAe,YAAa4K,GAC1C,MAAMC,EAAwB,CAAE,EAGhC,IAAK,MAAMC,KAAgBF,EACzB,IAAK,MAAMG,KAAOvL,OAAOuG,KAAK+E,GAAe,CAC3C,MAAME,EAASH,EAAsBE,GAC/BE,EAAWH,EAAaC,GAO5BF,EAAsBE,GAFF,iBAAXC,GAA2C,iBAAbC,EAEV1N,KAAKyC,aAAagL,EAAQC,GAE1BA,CAErC,CAGE,OAAOJ,CACT,EClMA1K,EAAWhC,UAAU2K,KAAO,WAG1B,GAAqC,IAAjCvL,KAAK8B,QAAQ6L,SAAS5M,OAAc,CACtC,MAAMqD,EAASpE,KAAK8B,QAAQ6L,SAAS,GACrCvJ,EAAOwJ,UAAU/M,SAASgN,IACpBA,EAAUC,WAAW,kBACvB1J,EAAOwJ,UAAUzC,OAAO0C,GAE1BzJ,EAAOwJ,UAAUzC,OAAO,wBAAwB,IAE9CnL,KAAK+B,OAAOe,eACdsB,EAAOwJ,UAAUG,OAAO/N,KAAK+B,OAAOe,cAAckL,MAAM,KAE9D,CAEMhO,KAAK8B,QAAQ6L,SAAS5M,OAAS,GACjCf,KAAKiO,UAET,EAEArL,EAAWhC,UAAUqN,SAAW,WAC9BjO,KAAKkO,MAAQlO,KAAKmO,aAClBnO,KAAK8B,QAAQsM,mBAAmB,aAAcpO,KAAKqO,kBACnDrO,KAAKsO,iBAELtO,KAAKuO,YAAcvO,KAAK8B,QAAQoC,cAAc,mBAC9ClE,KAAKoL,MAAQpL,KAAKkO,MAAMM,iBAAiB,aAEzCxO,KAAKuO,YAAY9M,iBAAiB,SAAUiK,IAC1C1L,KAAKyO,WAAW/C,EAAM,IAGxB1L,KAAK8B,QAAQL,iBAAiB,WAAYiK,IACxC1L,KAAK0O,cAAchD,EAAM,IAG3BrG,SAAS5D,iBAAiB,SAAUiK,IAC7B1L,KAAK8B,QAAQ6J,SAASD,EAAME,SAC/B5L,KAAK2O,WAAU,EACrB,GAEA,EAEA/L,EAAWhC,UAAUuN,WAAa,WAChC,MAAMD,EAAQ7I,SAASC,cAAc,MASrC,IARA4I,EAAM1M,aAAa,OAAQ,QAC3B0M,EAAMU,QAAS,EACfV,EAAMN,UAAUG,IAAI,4BACU,UAA1B/N,KAAK+B,OAAOgB,WACdmL,EAAMN,UAAUG,IAAI,mCAGtB/N,KAAK8B,QAAQ+M,YAAYX,GAClBlO,KAAK8B,QAAQgN,aAAeZ,GACjCA,EAAMW,YAAY7O,KAAK8B,QAAQgN,YAGjC,OAAOZ,CACT,EAEAtL,EAAWhC,UAAU0N,eAAiB,WACpCS,MAAMC,KAAKhP,KAAKkO,MAAMP,UAAU9M,SAAS+I,IAEvC,MAAMqF,EAAW5J,SAASC,cAAc,MACxCtF,KAAKkO,MAAMgB,aAAaD,EAAUrF,GAClCqF,EAASJ,YAAYjF,GAErBA,EAAKpI,aAAa,eAEG,WAAjBoI,EAAKuF,SACPvF,EAAKpI,aAAa,OAAQ,UAG5BoI,EAAKgE,UAAU/M,SAASgN,IAClBA,EAAUC,WAAW,iBACvBlE,EAAKgE,UAAUzC,OAAO0C,EAC9B,IAIIjE,EAAKnI,iBAAiB,SAAUiK,IAC9B0D,YAAW,KACTpP,KAAK2O,WAAU,EAAM,GACpB,GAAG,GACN,GAEN,EAEA/L,EAAWhC,UAAUyN,eAAiB,WACpC,MAAO,kFACsErO,KAAK+B,OAAOe,eAAiB,yEAEnG9C,KAAK+B,OAAOc,qNAMrB,EAKAD,EAAWhC,UAAUyO,OAAS,WAC5B,MAA0D,SAAnDrP,KAAKuO,YAAYlN,aAAa,gBACvC,EAEAuB,EAAWhC,UAAU6N,WAAa,SAAU/C,GAC1CA,EAAM4D,iBAGN,MACMC,EADiC,IAAjB7D,EAAM8D,OACO,GAAM,EAErCxP,KAAKqP,SACPrP,KAAK2O,YAEL3O,KAAKyP,SAASF,EAElB,EAOA3M,EAAWhC,UAAU6O,SAAW,SAAUF,EAAa,GACrDvP,KAAKkO,MAAMU,QAAS,EACpB5O,KAAKuO,YAAY/M,aAAa,gBAAiB,SAC5B,IAAf+N,GACFvP,KAAK0P,UAAUH,EAEnB,EAOA3M,EAAWhC,UAAU+N,UAAY,SAAUgB,GAAY,GACrD3P,KAAKkO,MAAMU,QAAS,EACpB5O,KAAKuO,YAAY/M,aAAa,gBAAiB,SAC3CmO,GACF3P,KAAKuO,YAAY3M,OAErB,EAOAgB,EAAWhC,UAAU8O,UAAY,SAAUrL,GACrCA,GAASrE,KAAKoL,MAAMrK,SAAQsD,EAAQ,GACpCA,EAAQ,IAAGA,EAAQrE,KAAKoL,MAAMrK,OAAS,GAE3C,MAAM6O,EAAW5P,KAAKoL,MAAMxB,KAAKvF,GAC7BuL,GACFA,EAAShO,OAEb,EAEAgB,EAAWhC,UAAUiP,kBAAoB,WACvC,MAAMC,EAAgBzK,SAASyK,cAG/B,OAFkBf,MAAMC,KAAKhP,KAAKoL,OAEjB2E,QAAQD,EAC3B,EAEAlN,EAAWhC,UAAU8N,cAAgB,SAAUhD,GAC7C,GAAIA,EAAME,SAAW5L,KAAKuO,YACxB,OAAQ7C,EAAM8B,KACZ,IAAK,YACH9B,EAAM4D,iBACNtP,KAAKyP,WACL,MACF,IAAK,UACH/D,EAAM4D,iBACNtP,KAAKyP,SAASzP,KAAKoL,MAAMrK,OAAS,GAKxC,GAAIf,KAAKkO,MAAMvC,SAASD,EAAME,SAAW5L,KAAKqP,SAC5C,OAAQ3D,EAAM8B,KACZ,IAAK,YACH9B,EAAM4D,sBACFtP,KAAK6P,qBACP7P,KAAK0P,UAAU1P,KAAK6P,oBAAsB,GAE5C,MACF,IAAK,UACHnE,EAAM4D,sBACFtP,KAAK6P,qBACP7P,KAAK0P,UAAU1P,KAAK6P,oBAAsB,GAE5C,MACF,IAAK,OACHnE,EAAM4D,iBACNtP,KAAK0P,UAAU,GACf,MACF,IAAK,MACHhE,EAAM4D,iBACNtP,KAAK0P,UAAU1P,KAAKoL,MAAMrK,OAAS,GAKvB,WAAd2K,EAAM8B,KAAoBxN,KAAKqP,UACjCrP,KAAK2O,YAEW,QAAdjD,EAAM8B,KAAiBxN,KAAKqP,UAC9BrP,KAAK2O,WAAU,EAEnB,EAYA/L,EAAWhC,UAAU8B,aAAe,SAAUV,EAAQW,GACpD,MAAMuK,EAAS,CAAE,EAEjB,IAAK,MAAOC,OAAalL,OAAOmL,QAAQpL,EAAOG,YACzCgL,KAASxK,GACPA,EAAQwK,KACVD,EAAOC,GAASxK,EAAQwK,IAK9B,OAAOD,CACT,EAWAtK,EAAWhC,UAAU6B,aAAe,YAAa4K,GAC/C,MAAMC,EAAwB,CAAE,EAGhC,IAAK,MAAMC,KAAgBF,EACzB,IAAK,MAAMG,KAAOvL,OAAOuG,KAAK+E,GAAe,CAC3C,MAAME,EAASH,EAAsBE,GAC/BE,EAAWH,EAAaC,GAO5BF,EAAsBE,GAFF,iBAAXC,GAA2C,iBAAbC,EAEV1N,KAAKyC,aAAagL,EAAQC,GAE1BA,CAErC,CAGE,OAAOJ,CACT,ECnOAtK,EAAWpC,UAAU2K,KAAO,WAErBvL,KAAKiE,SAGNjE,KAAK8B,QAAQa,QAAQqN,cAIzBhQ,KAAKiQ,aACLjQ,KAAKkQ,eACLlQ,KAAK8B,QAAQN,aAAa,mBAAoB,SAChD,EAEAwB,EAAWpC,UAAUsP,aAAe,WAClClQ,KAAK0K,GAAK,cAAc1K,KAAKiE,OAAOyG,KAEpC1K,KAAKmQ,QAAUnQ,KAAKoQ,eACpBpQ,KAAKqQ,wBAEL,MAAMC,EAAoBjL,SAASC,cAAc,OAC3CiL,EAAgBlL,SAASC,cAAc,OAC7CgL,EAAkB1C,UAAUG,IAAI,2BAChCwC,EAAc3C,UAAUG,IAAI,wBAE5B/N,KAAKiE,OAAOuM,WAAWtB,aAAaoB,EAAmBtQ,KAAKiE,QAC5DqM,EAAkBzB,YAAY0B,GAC9BA,EAAc1B,YAAY7O,KAAKiE,QAE/BsM,EAAcnC,mBAAmB,YAAapO,KAAKqO,kBACnDiC,EAAkBG,sBAAsB,YAAazQ,KAAKmQ,SAE1DnQ,KAAK0Q,gBAAkB1Q,KAAK8B,QAAQoC,cAAc,6BAClDlE,KAAK2Q,aAAe3Q,KAAKmQ,QAAQjM,cAC/B,iCAGFlE,KAAK4Q,iBAEL5Q,KAAK6Q,iBAAmB7Q,KAAKmQ,QAAQjM,cACnC,iCAEFlE,KAAK8Q,gBAAkB9Q,KAAKmQ,QAAQjM,cAClC,gCAEFlE,KAAK+Q,iBAAmB/Q,KAAKmQ,QAAQjM,cACnC,iCAEFlE,KAAKgR,gBAAkBhR,KAAKmQ,QAAQjM,cAClC,gCAEFlE,KAAKiR,cAAgBjR,KAAKmQ,QAAQjM,cAAc,6BAChDlE,KAAKkR,UAAYlR,KAAKmQ,QAAQjM,cAAc,yBAG5ClE,KAAK6Q,iBAAiBpP,iBAAiB,SAAUiK,GAC/C1L,KAAKmR,mBAAmBzF,GAAO,KAEjC1L,KAAK8Q,gBAAgBrP,iBAAiB,SAAUiK,GAC9C1L,KAAKoR,kBAAkB1F,GAAO,KAEhC1L,KAAK+Q,iBAAiBtP,iBAAiB,SAAUiK,GAC/C1L,KAAKqR,eAAe3F,GAAO,KAE7B1L,KAAKgR,gBAAgBvP,iBAAiB,SAAUiK,GAC9C1L,KAAKsR,cAAc5F,GAAO,KAE5B1L,KAAKiR,cAAcxP,iBAAiB,SAAUiK,IAC5CA,EAAM4D,iBACNtP,KAAKuR,YAAY7F,EAAM,IAEzB1L,KAAKkR,UAAUzP,iBAAiB,SAAS,KACvCzB,KAAKwR,WAAWxR,KAAKyD,YAAY,IAGnC,MAAMgO,EAAgBzR,KAAKmQ,QAAQ3B,iBACjC,iCAGFxO,KAAK0R,qBAAuBD,EAAc,GAC1CzR,KAAK2R,oBAAsBF,EAAcA,EAAc1Q,OAAS,GAChEf,KAAK0R,qBAAqBjQ,iBAAiB,WAAYiK,GACrD1L,KAAK4R,mBAAmBlG,KAE1B1L,KAAK2R,oBAAoBlQ,iBAAiB,WAAYiK,GACpD1L,KAAK6R,kBAAkBnG,KAGzB1L,KAAK0Q,gBAAgBjP,iBAAiB,SAAUiK,GAC9C1L,KAAK8R,aAAapG,KAGpB1L,KAAKmQ,QAAQ1O,iBAAiB,WAAYiK,IACtB,WAAdA,EAAM8B,MACRxN,KAAKuR,cACL7F,EAAM4D,iBACN5D,EAAMqG,kBACZ,IAGE1M,SAASiE,KAAK7H,iBAAiB,WAAYiK,GACzC1L,KAAKgS,gBAAgBtG,KAIvB1L,KAAKiS,gBACP,EAEAjP,EAAWpC,UAAUwP,aAAe,WAClC,MAAM8B,EAAU,oBAAoBlS,KAAKiE,OAAOyG,KAC1CyF,EAAU9K,SAASC,cAAc,OAUvC,OARA6K,EAAQzF,GAAK1K,KAAK0K,GAClByF,EAAQ3O,aAAa,QAAS,0BAC9B2O,EAAQ3O,aAAa,OAAQ,UAC7B2O,EAAQ3O,aAAa,aAAc,QACnC2O,EAAQ3O,aAAa,kBAAmB0Q,GACxC/B,EAAQ1E,UAAYzL,KAAKmS,eAAeD,GACxC/B,EAAQvB,QAAS,EAEVuB,CACT,EAEAnN,EAAWpC,UAAUgQ,eAAiB,WACpC,MAAMwB,EAASpS,KAAKmQ,QAAQjM,cAAc,SAC1C,IAAImO,EAAW,EACf,IAAK,IAAIvR,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAE1B,MAAMwR,EAAOF,EAAOG,UAAUzR,GAE9B,IAAK,IAAI0R,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAE1B,MAAMC,EAAQpN,SAASC,cAAc,MAC/BoN,EAAcrN,SAASC,cAAc,UAE3CmN,EAAM5D,YAAY6D,GAClBJ,EAAKzD,YAAY4D,GAEjB,MAAME,EAAc,IAAIxO,EAAcuO,EAAaL,EAAUvR,EAAG0R,EAAGxS,MACnE2S,EAAYpH,OACZvL,KAAK4D,aAAagP,KAAKD,GACvBN,GACN,CACA,CACA,EAEArP,EAAWpC,UAAUyN,eAAiB,WACpC,MAAO,uHAAuHrO,KAAK0K,grCAarI,EAQA1H,EAAWpC,UAAUuR,eAAiB,SAAUD,GAC9C,MAAO,y3CAkBaA,mhDAoBkFA,iZAYxG,EAEAlP,EAAWpC,UAAUyP,sBAAwB,WAC3CrQ,KAAKuD,UAAU1C,SAASgS,IACtB,MAAMC,EAAO,4CAA4CD,EAAIE,UAAU,EAAG,gDAAgDF,gBACvG7S,KAAKmQ,QAAQjM,cAAc,cACnCkK,mBAAmB,YAAa0E,EAAK,GAEpD,EASA9P,EAAWpC,UAAUuC,aAAe,SAAU6H,EAAOjK,EAAS,GAC5D,IAAIiS,EAAMhI,EAAMiI,WAEhB,KAAOD,EAAIjS,OAASA,GAClBiS,EAAM,IAAIA,IAGZ,OAAOA,CACT,EAEAhQ,EAAWpC,UAAUqP,WAAa,WAChCjQ,KAAKkT,8BACLlT,KAAKmT,mBACLnT,KAAKoT,kBACLpT,KAAKqT,kBACLrT,KAAKsT,iBACP,EAEAtQ,EAAWpC,UAAUsS,4BAA8B,WAC7ClT,KAAK+B,OAAOsB,UACdrD,KAAKqD,QAAUrD,KAAKuT,wBAAwBvT,KAAK+B,OAAOsB,QAAS,MAC7DrD,KAAKqD,SAAWrD,KAAKyD,YAAczD,KAAKqD,UAC1CrD,KAAKyD,YAAczD,KAAKqD,UAIxBrD,KAAK+B,OAAOqB,UACdpD,KAAKoD,QAAUpD,KAAKuT,wBAAwBvT,KAAK+B,OAAOqB,QAAS,MAC7DpD,KAAKoD,SAAWpD,KAAKyD,YAAczD,KAAKoD,UAC1CpD,KAAKyD,YAAczD,KAAKoD,SAG9B,EAEAJ,EAAWpC,UAAUuS,iBAAmB,WAClCnT,KAAK+B,OAAOkB,gBACdjD,KAAKiD,cAAgBjD,KAAK+B,OAAOkB,cAC9B2H,QAAQ,MAAO,KACfoD,MAAM,KACNwF,KAAK5J,GACGA,EAAKmD,SAAS,KACjB/M,KAAKyT,qBAAqB7J,GAC1B5J,KAAKuT,wBAAwB3J,KAElC8J,OACA7O,QAAQ+E,GAASA,IAExB,EAOA5G,EAAWpC,UAAU6S,qBAAuB,SAAUE,GACpD,MAAMC,EAAQ,IACPC,EAAWC,GAAWH,EAC1B3F,MAAM,KACNwF,KAAKO,GAAM/T,KAAKuT,wBAAwBQ,EAAG,QAE9C,GAAIF,GAAaC,EAAS,CACxB,MAAMrP,EAAO,IAAIf,KAAKmQ,EAAUG,WAEhC,KAAOvP,GAAQqP,GACbF,EAAMhB,KAAK,IAAIlP,KAAKe,IACpBA,EAAKwP,QAAQxP,EAAKyP,UAAY,EAGpC,CACE,OAAON,CACT,EAEA5Q,EAAWpC,UAAUwS,gBAAkB,WACrC,GAAIpT,KAAK+B,OAAOmB,aAAc,CAG5B,MAAMiR,EAAWnU,KAAKuD,UAAUiQ,KAAK5J,GAASA,EAAKwK,gBAClB,WAA7BpU,KAAK+B,OAAOuB,cACd6Q,EAASE,QAAQF,EAASG,OAG5BtU,KAAKkD,aAAelD,KAAK+B,OAAOmB,aAC7B0H,QAAQ,MAAO,KACfwJ,cACApG,MAAM,KACNwF,KAAK5J,GAASuK,EAASpE,QAAQnG,KAC/B/E,QAAQ+E,QAASA,GACxB,CACA,EAEA5G,EAAWpC,UAAUyS,gBAAkB,WACrC,GAAwC,kBAA7BrT,KAAK+B,OAAOoB,aAA4B,CACjD,GAA+C,SAA3CnD,KAAK+B,OAAOoB,aAAaiR,cAE3B,YADApU,KAAK+B,OAAOoB,cAAe,GAGkB,UAA3CnD,KAAK+B,OAAOoB,aAAaiR,gBAC3BpU,KAAK+B,OAAOoB,cAAe,EAEjC,CACA,EAEAH,EAAWpC,UAAU0S,gBAAkB,WACrC,MAAMiB,EAAoBvU,KAAK+B,OAAOuB,aAClCiR,GAAyD,WAApCA,EAAkBH,eACzCpU,KAAK+B,OAAOuB,aAAe,SAE3BtD,KAAKuD,UAAU8Q,QAAQrU,KAAKuD,UAAU+Q,QAEtCtU,KAAK+B,OAAOuB,aAAe,QAE/B,EAQAN,EAAWpC,UAAU4T,eAAiB,SAAU/P,GAG9C,GAAIzE,KAAKqD,SAAWrD,KAAKqD,QAAUoB,EACjC,OAAO,EAIT,GAAIzE,KAAKoD,SAAWpD,KAAKoD,QAAUqB,EACjC,OAAO,EAGT,IAAK,MAAMgQ,KAAgBzU,KAAKiD,cAC9B,GAAIwB,EAAKiQ,iBAAmBD,EAAaC,eACvC,OAAO,EAIX,QAAI1U,KAAKkD,aAAa6J,SAAStI,EAAKkQ,SAKtC,EASA3R,EAAWpC,UAAU2S,wBAA0B,SAC7CqB,EACAC,EAAW,IAAInR,MAEf,IAAIoR,EAAgB,KAEpB,MAAMC,EAAoB,uCAE1B,IAAKA,EAAkBC,KAAKJ,GAAa,OAAOC,EAEhD,MAAMI,EAAQL,EAAWK,MAAMF,GACzBlC,EAAMoC,EAAM,GACZC,EAAQD,EAAM,GACdE,EAAOF,EAAM,GAGnB,OADAH,EAAgB,IAAIpR,KAAK,GAAGyR,KAAQD,KAASrC,KACzCiC,aAAyBpR,OAAS0R,MAAMN,GACnCA,EAEFD,CACT,EAQA7R,EAAWpC,UAAUyU,sBAAwB,SAAU5Q,GACrD,OAAIzE,KAAK+B,OAAOoB,aACP,GAAGnD,KAAKmD,aAAasB,EAAKyP,cAAclU,KAAKmD,aAAasB,EAAK6Q,WAAa,MAAM7Q,EAAK8Q,gBAGzF,GAAG9Q,EAAKyP,aAAazP,EAAK6Q,WAAa,KAAK7Q,EAAK8Q,eAC1D,EAQAvS,EAAWpC,UAAU4U,mBAAqB,SAAU/Q,GAClD,MAAO,GAAGzE,KAAKuD,WAAWkB,EAAKkQ,SAAW,GAAK,MAAMlQ,EAAKyP,aAAalU,KAAKwD,YAAYiB,EAAK6Q,eAAe7Q,EAAK8Q,eACnH,EAEAvS,EAAWpC,UAAUoR,gBAAkB,SAAUtG,IAE7C1L,KAAKqP,UACJrP,KAAKmQ,QAAQxE,SAASD,EAAME,SAC5B5L,KAAKiE,OAAO0H,SAASD,EAAME,SAC3B5L,KAAK0Q,gBAAgB/E,SAASD,EAAME,UAErCF,EAAM4D,iBACNtP,KAAKuR,cAET,EAEAvO,EAAWpC,UAAUgR,mBAAqB,SAAUlG,GAChC,QAAdA,EAAM8B,KAAiB9B,EAAM+J,WAC/BzV,KAAK2R,oBAAoB/P,QACzB8J,EAAM4D,iBAEV,EAEAtM,EAAWpC,UAAUiR,kBAAoB,SAAUnG,GAC/B,QAAdA,EAAM8B,KAAkB9B,EAAM+J,WAChCzV,KAAK0R,qBAAqB9P,QAC1B8J,EAAM4D,iBAEV,EAGAtM,EAAWpC,UAAUqR,eAAiB,WACpCjS,KAAK2Q,aAAalF,UAAY,GAAGzL,KAAKwD,YAAYxD,KAAKyD,YAAY6R,eAAetV,KAAKyD,YAAY8R,gBAEnG,MAAM1C,EAAM7S,KAAKyD,YACXiS,EAAe,IAAIhS,KAAKmP,EAAI0C,cAAe1C,EAAIyC,WAAY,GACjE,IAAIK,EAGFA,EAD+B,WAA7B3V,KAAK+B,OAAOuB,aACwB,IAA1BoS,EAAaf,SAAiB,EAAIe,EAAaf,SAAW,EAE1De,EAAaf,SAG3Be,EAAazB,QAAQyB,EAAaxB,UAAYyB,GAE9C,MAAMC,EAAU,IAAIlS,KAAKgS,GAGzB,IAAK,IAAI5U,EAAI,EAAGA,EAAId,KAAK4D,aAAa7C,OAAQD,IAAK,CACjD,MAAM8N,EAASgH,EAAQN,aAAezC,EAAIyC,WACpCO,EAAW7V,KAAKwU,eAAeoB,GAErC5V,KAAK4D,aAAa9C,GAAGgV,OAAOF,EAAShH,EAAQiH,GAE7CD,EAAQ3B,QAAQ2B,EAAQ1B,UAAY,EACxC,CACA,EAEAlR,EAAWpC,UAAUmV,eAAiB,SAAUnU,GAAQ,GACtD,MAAM6B,YAAEA,GAAgBzD,KA0CxB,GAzCAA,KAAK4D,aAAa/C,SAAS8R,IACzBA,EAAYvO,OAAOwJ,UAAUG,IAAI,0BACjC4E,EAAYvO,OAAOwJ,UAAUG,IAAI,gCACjC4E,EAAYvO,OAAO5C,aAAa,YAAY,GAC5CmR,EAAYvO,OAAOwJ,UAAUzC,OAAOnL,KAAK8D,wBACzC,MAAMkS,EAAkBrD,EAAYlO,KACpCuR,EAAgBrS,SAAS,EAAG,EAAG,EAAG,GAElC,MAAMsS,EAAQ,IAAIvS,KAClBuS,EAAMtS,SAAS,EAAG,EAAG,EAAG,GAGtBqS,EAAgBhC,YAChBvQ,EAAYuQ,WAERpS,IACF+Q,EAAYvO,OAAO5C,aAAa,WAAY,GAC5CmR,EAAYvO,OAAOxC,QACnB+Q,EAAYvO,OAAOwJ,UAAUG,IAAI/N,KAAK8D,yBAKxC9D,KAAKkW,WACLF,EAAgBhC,YAAchU,KAAKkW,UAAUlC,WAE7CrB,EAAYvO,OAAOwJ,UAAUG,IAAI/N,KAAK+D,uBACtC4O,EAAYvO,OAAO5C,aAAa,eAAgB,UAEhDmR,EAAYvO,OAAOwJ,UAAUzC,OAAOnL,KAAK+D,uBACzC4O,EAAYvO,OAAO7C,gBAAgB,iBAGjCyU,EAAgBhC,YAAciC,EAAMjC,UACtCrB,EAAYvO,OAAOwJ,UAAUG,IAAI/N,KAAKgE,kBAEtC2O,EAAYvO,OAAOwJ,UAAUzC,OAAOnL,KAAKgE,iBAC/C,KAIOpC,EAAO,CACV,MAAMuU,EAAcnW,KAAK4D,aAAaiB,QAAQ8N,GAEc,UAAxDjS,OAAO0V,iBAAiBzD,EAAYvO,QAAQiS,UAC3C1D,EAAYvO,OAAOyR,WAIxBM,EAAY,GAAG/R,OAAO5C,aAAa,WAAY,GAE/CxB,KAAKyD,YAAc0S,EAAY,GAAG1R,IACtC,CACA,EAEAzB,EAAWpC,UAAU4Q,WAAa,SAAU/M,GAC1C,GAAIzE,KAAKwU,eAAe/P,GACtB,OAGFzE,KAAK0Q,gBAAgBxM,cAAc,QAAQoS,UACzC,iCAAiCtW,KAAKwV,mBAAmB/Q,KAC3DzE,KAAKiE,OAAO+G,MAAQhL,KAAKqV,sBAAsB5Q,GAE/C,MAAM8R,EAAc,IAAIC,MAAM,SAAU,CAAEC,SAAS,EAAMC,YAAY,IACrE1W,KAAKiE,OAAO0S,cAAcJ,GAE1BvW,KAAKuR,aACP,EAEAvO,EAAWpC,UAAUyO,OAAS,WAC5B,OAAOrP,KAAKmQ,QAAQvC,UAAUjC,SAAS,+BACzC,EAEA3I,EAAWpC,UAAUkR,aAAe,SAAUpG,GAC5CA,EAAM4D,iBACFtP,KAAKqP,SACPrP,KAAKuR,eAELvR,KAAKkT,8BACLlT,KAAK4W,aAET,EAEA5T,EAAWpC,UAAUgW,WAAa,WAChC5W,KAAKmQ,QAAQvB,QAAS,EACtB5O,KAAKmQ,QAAQvC,UAAUG,IAAI,gCAC3B/N,KAAK0Q,gBAAgBlP,aAAa,gBAAiB,QAI/CxB,KAAKiE,OAAO4S,YAAc7W,KAAKmQ,QAAQ0G,cACzC7W,KAAKmQ,QAAQ2G,MAAMpO,MAAQ,OAE7B1I,KAAKmQ,QAAQ2G,MAAMC,IAAM,GAAG/W,KAAKiE,OAAO+S,aAAe,MAGvDhX,KAAKkW,UAAYlW,KAAKuT,wBAAwBvT,KAAKiE,OAAO+G,OAC1DhL,KAAKyD,YAAczD,KAAKkW,UACxBlW,KAAKyD,YAAYE,SAAS,EAAG,EAAG,EAAG,GAEnC3D,KAAKiS,iBACLjS,KAAK+V,gBACP,EAEA/S,EAAWpC,UAAU2Q,YAAc,WACjCvR,KAAKmQ,QAAQvB,QAAS,EACtB5O,KAAKmQ,QAAQvC,UAAUzC,OAAO,gCAC9BnL,KAAK0Q,gBAAgBlP,aAAa,gBAAiB,SACnDxB,KAAK0Q,gBAAgB9O,OACvB,EAEAoB,EAAWpC,UAAUqW,SAAW,SAAUxS,EAAM7C,GAC9C,MAAMsV,EAAUlX,KAAKyD,YACrBzD,KAAKyD,YAAcgB,EAGjByS,EAAQ5B,aAAetV,KAAKyD,YAAY6R,YACxC4B,EAAQ3B,gBAAkBvV,KAAKyD,YAAY8R,eAE3CvV,KAAKiS,iBAGPjS,KAAK+V,eAAenU,EACtB,EAGAoB,EAAWpC,UAAUuW,aAAe,WAClC,MAAM1S,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKwP,QAAQxP,EAAKyP,UAAY,GAC9BlU,KAAKiX,SAASxS,EAChB,EAEAzB,EAAWpC,UAAUwW,iBAAmB,WACtC,MAAM3S,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKwP,QAAQxP,EAAKyP,UAAY,GAC9BlU,KAAKiX,SAASxS,EAChB,EAGAzB,EAAWpC,UAAUyW,cAAgB,WACnC,MAAM5S,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKwP,QAAQxP,EAAKyP,UAAY,GAC9BlU,KAAKiX,SAASxS,EAChB,EAEAzB,EAAWpC,UAAU0W,kBAAoB,WACvC,MAAM7S,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKwP,QAAQxP,EAAKyP,UAAY,GAC9BlU,KAAKiX,SAASxS,EAChB,EAEAzB,EAAWpC,UAAU2W,oBAAsB,WACzC,MAAM9S,EAAO,IAAIf,KAAK1D,KAAKyD,aACrB+T,EAAmD,WAA7BxX,KAAK+B,OAAOuB,aAA4B,EAAI,EAClEqS,EAAYlR,EAAKkQ,SACjB8C,EACJ9B,GAAa6B,EACT7B,EAAY6B,EACZ,EAAI7B,EAEVlR,EAAKwP,QAAQxP,EAAKyP,UAAYuD,GAC9BhT,EAAKd,SAAS,EAAG,EAAG,EAAG,GAEvB3D,KAAKiX,SAASxS,EAChB,EAEAzB,EAAWpC,UAAU8W,mBAAqB,WACxC,MAAMjT,EAAO,IAAIf,KAAK1D,KAAKyD,aACrBkU,EAAkD,WAA7B3X,KAAK+B,OAAOuB,aAA4B,EAAI,EACjEqS,EAAYlR,EAAKkQ,SACjB8C,EACJ9B,GAAagC,EACTA,EAAqBhC,EACrB,EAAIA,EAEVlR,EAAKwP,QAAQxP,EAAKyP,UAAYuD,GAC9BhT,EAAKd,SAAS,EAAG,EAAG,EAAG,GAEvB3D,KAAKiX,SAASxS,EAChB,EAGAzB,EAAWpC,UAAUyQ,eAAiB,SAAU3F,EAAO9J,GAAQ,GAC7D8J,EAAM4D,iBACN,MAAM7K,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKmT,SAASnT,EAAK6Q,WAAa,EAAG,GACnCtV,KAAKiX,SAASxS,EAAM7C,EACtB,EAEAoB,EAAWpC,UAAUuQ,mBAAqB,SAAUzF,EAAO9J,GAAQ,GACjE8J,EAAM4D,iBACN,MAAM7K,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKmT,SAASnT,EAAK6Q,WAAa,EAAG,GACnCtV,KAAKiX,SAASxS,EAAM7C,EACtB,EAGAoB,EAAWpC,UAAU0Q,cAAgB,SAAU5F,EAAO9J,GAAQ,GAC5D8J,EAAM4D,iBACN,MAAM7K,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKoT,YAAYpT,EAAK8Q,cAAgB,EAAG9Q,EAAK6Q,WAAY,GAC1DtV,KAAKiX,SAASxS,EAAM7C,EACtB,EAEAoB,EAAWpC,UAAUwQ,kBAAoB,SAAU1F,EAAO9J,GAAQ,GAChE8J,EAAM4D,iBACN,MAAM7K,EAAO,IAAIf,KAAK1D,KAAKyD,aAC3BgB,EAAKoT,YAAYpT,EAAK8Q,cAAgB,EAAG9Q,EAAK6Q,WAAY,GAC1DtV,KAAKiX,SAASxS,EAAM7C,EACtB,EASAoB,EAAWpC,UAAU8B,aAAe,SAAUV,EAAQW,GACpD,MAAMuK,EAAS,CAAE,EAEjB,IAAK,MAAOC,OAAalL,OAAOmL,QAAQpL,EAAOG,YACzCgL,KAASxK,IACXuK,EAAOC,GAASxK,EAAQwK,IAI5B,OAAOD,CACT,EAWAlK,EAAWpC,UAAU6B,aAAe,YAAa4K,GAC/C,MAAMC,EAAwB,CAAE,EAGhC,IAAK,MAAMC,KAAgBF,EACzB,IAAK,MAAMG,KAAOvL,OAAOuG,KAAK+E,GAAe,CAC3C,MAAME,EAASH,EAAsBE,GAC/BE,EAAWH,EAAaC,GAO5BF,EAAsBE,GAFF,iBAAXC,GAA2C,iBAAbC,EAEV1N,KAAKyC,aAAagL,EAAQC,GAE1BA,CAErC,CAGE,OAAOJ,CACT,EAqBAnJ,EAAcvD,UAAU2K,KAAO,WAC7BvL,KAAKoE,OAAO3C,iBAAiB,UAAWzB,KAAK8X,SAAS5O,KAAKlJ,OAC3DA,KAAKoE,OAAO3C,iBAAiB,QAASzB,KAAK+X,MAAM7O,KAAKlJ,MACxD,EAOAmE,EAAcvD,UAAUkV,OAAS,SAAUjD,EAAKjE,EAAQiH,GACtD,MAAMmC,EAAQnF,EAAIqB,UAClB,IAAI+D,EAAkBjY,KAAKwE,OAAOgR,mBAAmB3C,GAEjDgD,GACF7V,KAAKoE,OAAO5C,aAAa,iBAAiB,GAC1CyW,EAAkB,kBAAkBA,KAEpCjY,KAAKoE,OAAO7C,gBAAgB,iBAI5BvB,KAAKoE,OAAO0S,MAAMT,QADhBzH,EAC0B,OAEA,QAE9B5O,KAAKoE,OAAO5C,aACV,cACAxB,KAAKwE,OAAO6Q,sBAAsBxC,IAGpC7S,KAAKoE,OAAOqH,UAAY,uCAAuCwM,oCAAkDD,WACjHhY,KAAKyE,KAAO,IAAIf,KAAKmP,EACvB,EAEA1O,EAAcvD,UAAUmX,MAAQ,SAAUrM,GACxC1L,KAAKwE,OAAOyS,SAASjX,KAAKyE,MAC1BzE,KAAKwE,OAAOgN,WAAWxR,KAAKyE,MAE5BiH,EAAMqG,kBACNrG,EAAM4D,gBACR,EAEAnL,EAAcvD,UAAUkX,SAAW,SAAUpM,GAC3C,IAAIwM,GAAiB,EAErB,OAAQxM,EAAM8B,KACZ,IAAK,YACHxN,KAAKwE,OAAO4S,mBACZ,MACF,IAAK,aACHpX,KAAKwE,OAAO2S,eACZ,MACF,IAAK,UACHnX,KAAKwE,OAAO8S,oBACZ,MACF,IAAK,YACHtX,KAAKwE,OAAO6S,gBACZ,MACF,IAAK,OACHrX,KAAKwE,OAAO+S,sBACZ,MACF,IAAK,MACHvX,KAAKwE,OAAOkT,qBACZ,MACF,IAAK,SAEHhM,EAAM+J,SACFzV,KAAKwE,OAAO4M,kBAAkB1F,GAC9B1L,KAAKwE,OAAO2M,mBAAmBzF,GACnC,MACF,IAAK,WAEHA,EAAM+J,SACFzV,KAAKwE,OAAO8M,cAAc5F,GAC1B1L,KAAKwE,OAAO6M,eAAe3F,GAC/B,MACF,QACEwM,GAAiB,EAIjBA,IACFxM,EAAM4D,iBACN5D,EAAMqG,kBAEV,ECn6BArN,EAAmB9D,UAAUmE,sBAAwB,WACnD/E,KAAKmY,GAAKzX,OAAO0X,WAAWpY,KAAKmB,QAAQkX,mBACzCrY,KAAKmY,GAAGG,YAAYrY,EAAEG,MAAMJ,KAAM,cAClCA,KAAKuY,UAAUvY,KAAKmY,GACtB,EAEAzT,EAAmB9D,UAAUkE,mBAAqB,WAChD9E,KAAKwY,WAAavY,EAChB,+BAA+BD,KAAKmB,QAAQwD,aAAa8T,qEAAqEzY,KAAKmB,QAAQwD,aAAa+T,qBAE1J1Y,KAAKwY,WAAWrY,GAAG,QAASF,EAAEG,MAAMJ,KAAM,sBAC1CA,KAAKD,UAAUmH,OAAOlH,KAAKwY,WAC7B,EAEA9T,EAAmB9D,UAAU2X,UAAY,SAAUJ,GAC7CA,EAAGlM,QACLjM,KAAK2Y,gBAEL3Y,KAAK4Y,iBAET,EAEAlU,EAAmB9D,UAAU+X,cAAgB,WAC3C3Y,KAAK6Y,WACL7Y,KAAK8Y,mBACP,EAEApU,EAAmB9D,UAAUgY,gBAAkB,WAC7C5Y,KAAKkF,WACLlF,KAAK+Y,gBACP,EAEArU,EAAmB9D,UAAUmY,eAAiB,WACxC/Y,KAAKmB,QAAQ6X,cACfhZ,KAAKgZ,YAAc/Y,EACjB,mDAAmDD,KAAKmB,QAAQ6X,YAAYhQ,iBAE9EhJ,KAAKgZ,YAAY7Y,GAAG,QAASF,EAAEG,MAAMJ,KAAM,iBAC3CC,EAAED,KAAKmB,QAAQ6X,YAAYjZ,WAAWmH,OAAOlH,KAAKgZ,aAEtD,EAEAtU,EAAmB9D,UAAUqY,aAAe,WAC1CjZ,KAAKkF,WACLlF,KAAKwY,WAAW5W,OAClB,EAEA8C,EAAmB9D,UAAUkY,kBAAoB,WAC3C9Y,KAAKgZ,cACPhZ,KAAKgZ,YAAY7N,SACjBnL,KAAKgZ,YAAc,KAEvB,EAEAtU,EAAmB9D,UAAUsE,SAAW,WACtClF,KAAKwY,WAAWxT,KAAK,gBAAiB,SACtChF,KAAK4E,gBAAgB0B,SAAS,iBAC9BtG,KAAKwY,WAAWxP,KAAKhJ,KAAKmB,QAAQwD,aAAa+T,SACjD,EAEAhU,EAAmB9D,UAAUiY,SAAW,WACtC7Y,KAAKwY,WAAWxT,KAAK,gBAAiB,QACtChF,KAAK4E,gBAAgBsU,YAAY,iBACjClZ,KAAKwY,WAAWxP,KAAKhJ,KAAKmB,QAAQwD,aAAawU,SACjD,EAEAzU,EAAmB9D,UAAUwY,kBAAoB,WAC/CpZ,KAAKgH,QACP,EAEAtC,EAAmB9D,UAAUoG,OAAS,WACU,UAA1ChH,KAAKwY,WAAWxT,KAAK,kBACvBhF,KAAK6Y,WACL7Y,KAAK4E,gBAAgB0G,IAAI,GAAG1J,SAE5B5B,KAAKkF,UAET,ECtDAC,EAAgBvE,UAAU6F,cAAgB,WACxCzG,KAAKqZ,UAAU5R,KAAK,mDACpBzH,KAAKsZ,SAAWtZ,KAAKD,UAAUM,KAAK,oCACpCL,KAAKsZ,SAASnZ,GAAG,WAAYF,EAAEG,MAAMJ,KAAM,eAC3CA,KAAKsZ,SAASnZ,GAAG,YAAaF,EAAEG,MAAMJ,KAAM,gBAC5CA,KAAKsZ,SAASnZ,GAAG,OAAQF,EAAEG,MAAMJ,KAAM,UACzC,EAEAmF,EAAgBvE,UAAU8F,WAAa,WACrC1G,KAAKgY,MAAQ/X,EACX,eAAeD,KAAKqZ,UAAU,GAAG3O,oDAAoD1K,KAAKoF,OAAOgB,8BAEnGpG,KAAKsZ,SAASpS,OACZ,yBAAyBlH,KAAKoF,OAAOe,wBAEvCnG,KAAKsZ,SAASpS,OAAOlH,KAAKgY,MAC5B,EAEA7S,EAAgBvE,UAAU4F,eAAiB,WACzCxG,KAAKqZ,UAAYrZ,KAAKD,UAAUM,KAAK,iCACrCL,KAAKqZ,UAAUlZ,GAAG,SAAUF,EAAEG,MAAMJ,KAAM,iBAC1CA,KAAKqZ,UAAUlZ,GAAG,QAASF,EAAEG,MAAMJ,KAAM,gBACzCA,KAAKqZ,UAAUlZ,GAAG,OAAQF,EAAEG,MAAMJ,KAAM,cAC1C,EAEAmF,EAAgBvE,UAAU+F,eAAiB,WACzC3G,KAAKuZ,OAAStZ,EACZ,0EAEFD,KAAKsZ,SAASpS,OAAOlH,KAAKuZ,OAC5B,EAEApU,EAAgBvE,UAAU4Y,WAAa,SAAU7P,GAC/CA,EAAE2F,iBACFtP,KAAKsZ,SAAShT,SAAS,kCACzB,EAEAnB,EAAgBvE,UAAU6Y,YAAc,WACtCzZ,KAAKsZ,SAASJ,YAAY,kCAC5B,EAEA/T,EAAgBvE,UAAU8Y,OAAS,SAAU/P,GAC3CA,EAAE2F,iBACFtP,KAAKsZ,SAASJ,YAAY,mCAC1BlZ,KAAKuG,kBAAkB2S,YAAY,cACnClZ,KAAKuZ,OAAOzG,KAAK9S,KAAKoF,OAAOc,kBAC7BlG,KAAK2Z,YAAYhQ,EAAEiQ,cAAcC,aAAanU,MAChD,EAEAP,EAAgBvE,UAAU+Y,YAAc,SAAUjU,GAChD,IAAK,IAAI5E,EAAI,EAAGA,EAAI4E,EAAM3E,OAAQD,IAChCd,KAAK8Z,WAAWpU,EAAM5E,GAE1B,EAEAqE,EAAgBvE,UAAUmZ,aAAe,SAAUpQ,GACjD3J,KAAKuG,kBAAkB2S,YAAY,cACnClZ,KAAKuZ,OAAOzG,KAAK9S,KAAKoF,OAAOc,kBAC7BlG,KAAK2Z,YAAYhQ,EAAEuB,cAAcxF,OACjC1F,KAAKqZ,UAAUW,YAAY/Z,EAAE0J,EAAEuB,eAAe+O,IAAI,IAAI1P,OAAM,IAC5DvK,KAAKwG,iBACLxG,KAAKqZ,UAAU/N,IAAI,GAAG1J,OACxB,EAEAuD,EAAgBvE,UAAUsZ,YAAc,SAAUvQ,GAChD3J,KAAKgY,MAAM1R,SAAS,iCACtB,EAEAnB,EAAgBvE,UAAUuZ,WAAa,SAAUxQ,GAC/C3J,KAAKgY,MAAMkB,YAAY,iCACzB,EAEA/T,EAAgBvE,UAAUwZ,eAAiB,SAAUC,GACnD,MAAO,2RAA2RA,EAAQC,oBAC5S,EAEAnV,EAAgBvE,UAAU2Z,aAAe,SAAUC,GACjD,MAAO,8TAA8TA,EAAMC,gBAC7U,EAEAtV,EAAgBvE,UAAU8Z,eAAiB,SAAUC,GASnD,MARa,6MAGqCA,EAAKhQ,+LAMzD,EAEAxF,EAAgBvE,UAAUga,oBAAsB,SAAUD,GACxD,MAAO,iJAAiJA,EAAKE,gEAC5GF,EAAKG,oCAExD,EAEA3V,EAAgBvE,UAAUkZ,WAAa,SAAUa,GAC/C3a,KAAKoF,OAAOS,oBAAoB7F,KAAM2a,GACtC,MAAM/Q,EAAO3J,EAAED,KAAK0a,eAAeC,IAC7BI,EAAW,IAAIvV,SACrBuV,EAAS7T,OAAO,YAAayT,GAC7B3a,KAAKuG,kBAAkBlG,KAAK,gCAAgC6G,OAAO0C,GAEnE3J,EAAE+a,KAAK,CACLC,IAAKjb,KAAKoF,OAAO8V,UACjB7Y,KAAM,OACNnC,KAAM6a,EACNI,aAAa,EACbC,aAAa,EACbf,QAASpa,EAAEG,OAAM,SAAUib,GACrBA,EAASb,OACX5Q,EACGvJ,KAAK,mCACLyS,KAAK9S,KAAKua,aAAac,EAASb,QACnCxa,KAAKuZ,OAAOzG,KAAKuI,EAASb,MAAMC,WAEhC7Q,EACGvJ,KAAK,mCACLyS,KAAK9S,KAAKoa,eAAeiB,EAAShB,UACrCra,KAAKuZ,OAAOzG,KAAKuI,EAAShB,QAAQiB,cAEpC1R,EACGvJ,KAAK,mCACL6G,OAAOlH,KAAK4a,oBAAoBS,EAASV,OAC5C3a,KAAKoF,OAAOW,mBAAmB/F,KAAM2a,EAAMU,EAC5C,GAAErb,MACHwa,MAAOva,EAAEG,OAAM,SAAUmb,EAAOC,EAAYC,GAC1Czb,KAAKoF,OAAOY,oBACVhG,KACA2a,EACAY,EACAC,EACAC,EAEH,GAAEzb,MACH0b,IAAK,WACH,MAAMA,EAAM,IAAIC,eAchB,OAbAD,EAAIE,OAAOna,iBACT,YACA,SAAUkI,GACR,GAAIA,EAAEkS,iBAAkB,CACtB,IAAIC,EAAkBnS,EAAEoS,OAASpS,EAAEqS,MACnCF,EAAkBG,SAA2B,IAAlBH,EAAuB,IAClDlS,EACGvJ,KAAK,oCACL2I,KAAK,IAAI8S,KACxB,CACS,IACD,GAEKJ,CACb,GAEA,EAEAvW,EAAgBvE,UAAUsb,kBAAoB,SAAUvS,GACtDA,EAAE2F,iBACF,MAAMlL,EAASnE,EAAE0J,EAAEuB,eACbhL,EAAO,CAAE,EACfA,EAAKkE,EAAO,GAAGuG,MAAQvG,EAAO,GAAG4G,MACjC/K,EAAE+a,KAAK,CACLC,IAAKjb,KAAKoF,OAAO+W,UACjB9Z,KAAM,OACN+Z,SAAU,OACVlc,OACAma,QAASpa,EAAEG,OAAM,SAAUib,GACrBA,EAASb,QACXpW,EAAO0G,QAAQ,+BAA+BK,SAG5C,IADAnL,KAAKuG,kBAAkBlG,KAAK,+BAA+BU,QAG3Df,KAAKuG,kBAAkBD,SAAS,eAGpCtG,KAAKoF,OAAOa,eAAejG,KAAMqb,EACvC,GAAOrb,OAEP,EChMA4G,EAAYhG,UAAUqG,cAAgB,SAAUF,GAC9C,IAAI+L,EAAO,GAQX,OAPAA,GACE,0FACFA,GAAQ,gEAAgE/L,MACxE+L,GAAQ,4FAA4F/L,MACpG+L,GAAQ,4DACRA,GAAQ,aACRA,GAAQ,SACDA,CACT,EAEAlM,EAAYhG,UAAUyb,cAAgB,SAAU1S,GAC1C3J,KAAKoH,SACPpH,KAAKsc,aACLtc,KAAK2E,aAAa,GAAGyC,SAAU,IAE/BpH,KAAKuc,WACLvc,KAAK2E,aAAa,GAAGyC,SAAU,EAEnC,EAEAR,EAAYhG,UAAU2b,SAAW,WAC/Bvc,KAAKmH,WAAWqD,KACdvK,EAAEG,OAAM,SAAUiE,EAAOkD,GACvBA,EAAGH,SAAU,CACnB,GAAOpH,OAELA,KAAKoH,SAAU,CACjB,EAEAR,EAAYhG,UAAU0b,WAAa,WACjCtc,KAAKmH,WAAWqD,KACdvK,EAAEG,OAAM,SAAUiE,EAAOkD,GACvBA,EAAGH,SAAU,CACnB,GAAOpH,OAELA,KAAKoH,SAAU,CACjB,EAEAR,EAAYhG,UAAU4b,gBAAkB,SAAU7S,GAC3CA,EAAEiC,OAAOxE,QAIRpH,KAAKmH,WAAWtC,OAAO,YAAY9D,SAAWf,KAAKmH,WAAWpG,SAChEf,KAAK2E,aAAa,GAAGyC,SAAU,EAC/BpH,KAAKoH,SAAU,IALjBpH,KAAK2E,aAAa,GAAGyC,SAAU,EAC/BpH,KAAKoH,SAAU,EAOnB,EC1DAC,EAAezG,UAAU+G,aAAe,WACtC3H,KAAKoE,OAASnE,EACZ,oKAEFD,KAAKD,UAAUmH,OAAOlH,KAAKoE,QAC3BpE,KAAKoE,OAAOjE,GAAG,QAASF,EAAEG,MAAMJ,KAAM,iBACxC,EAEAqH,EAAezG,UAAUyb,cAAgB,WAClB,aAAjBrc,KAAKuH,GAAGlF,MACVrC,KAAKuH,GAAGlF,KAAO,OACfrC,KAAKoE,OAAO0O,KAAK,8DAEjB9S,KAAKuH,GAAGlF,KAAO,WACfrC,KAAKoE,OAAO0O,KAAK,4DAErB,ECWAlL,EAAehH,UAAU6b,iBAAmB,SAAU9S,GACpD,IAAI+S,EACJ,OAAQ/S,EAAEgT,SACR,KAAK3c,KAAKwI,KAAKE,MACf,KAAK1I,KAAKwI,KAAKI,KAAM,CACnB8T,EAAkB1c,KAAK8H,QAAQzH,KAAK,sBACpC,MAAMuc,EAAaF,EAAgBG,KAAK,UACpCD,EAAW,KACbA,EAAWhb,QACX8a,EAAgB1X,KAAK,WAAY,MACjC4X,EAAW5X,KAAK,WAAY,MAE9B,KACN,CACI,KAAKhF,KAAKwI,KAAKC,KACf,KAAKzI,KAAKwI,KAAKG,GAAI,CACjB+T,EAAkB1c,KAAK8H,QAAQzH,KAAK,sBACpC,MAAMyc,EAAiBJ,EAAgBK,KAAK,UACxCD,EAAe,KACjBA,EAAelb,QACf8a,EAAgB1X,KAAK,WAAY,MACjC8X,EAAe9X,KAAK,WAAY,MAElC,KACN,EAEA,EAEA4C,EAAehH,UAAUoc,eAAiB,WACxC,IAAIlK,EAAO,GA8BX,OA5BAA,GAAQ,6DAEJ9S,KAAKmB,QAAQ2G,QAAQC,OACvB+K,GACE,8LAGA9S,KAAKmB,QAAQ2G,QAAQE,SACvB8K,GACE,oMAGA9S,KAAKmB,QAAQ2G,QAAQG,YACvB6K,GACE,6MAGA9S,KAAKmB,QAAQ2G,QAAQI,UACvB4K,GACE,iOAGA9S,KAAKmB,QAAQ2G,QAAQK,UACvB2K,GACE,2NAGJA,GAAQ,SACDA,CACT,EAEAlL,EAAehH,UAAUqc,gBAAkB,SAAUhD,GACnD,MAAO,GAAGja,KAAKgd,4HACjB,EAEApV,EAAehH,UAAU0H,YAAc,WACrCtI,KAAKoI,SAAWpI,KAAKD,UAAUM,KAAK,YACpCL,KAAKoI,SAAS9B,SAAS,yBACvBtG,KAAKoI,SAASpD,KAAK,eAAe,GAClChF,KAAKoI,SAASpD,KAAK,WAAY,KACjC,EAEA4C,EAAehH,UAAUyH,cAAgB,WACvCrI,KAAK8H,QAAUzC,SAASC,cAAc,OACtCtF,KAAK8H,QAAQ+F,UAAY,uBACzB7N,KAAK8H,QAAQ2D,UAAYzL,KAAKid,kBAC9Bjd,KAAKD,UAAUmH,OAAOlH,KAAK8H,SAC3B9H,KAAK8H,QAAU9H,KAAKD,UAAUM,KAAK,kCACnCL,KAAKD,UACFM,KAAK,kCACLyS,KAAK9S,KAAKoI,SAAS6R,MACxB,EAEArS,EAAehH,UAAU2H,iBAAmB,WAC1CvI,KAAKkd,QAAUld,KAAKD,UAAUM,KAAK,yCACnCL,KAAKkd,QAAQ5c,KAAK,WAAY,MACbN,KAAKkd,QAAQhT,QACrB5J,KAAK,WAAY,IAC5B,EAEAsH,EAAehH,UAAUyb,cAAgB,SAAU1S,GACjDtE,SAAS8X,YAAYld,EAAE0J,EAAEuB,eAAehL,KAAK,YAAY,EAAO,KAClE,EAEA0H,EAAehH,UAAUwc,WAAa,WACpC,OAAOpd,KAAKD,UAAUM,KAAK,kCAAkCyS,MAC/D,EAEAlL,EAAehH,UAAUyc,cAAgB,SAAU1T,GACjD3J,KAAKsd,gBACP,EAEA1V,EAAehH,UAAU0c,eAAiB,WACxCjY,SAAS8X,YAAY,6BAA6B,EAAO,KACzDnd,KAAKoI,SAAS6R,IAAIja,KAAKod,aACzB,EAEAxV,EAAehH,UAAU2c,aAAe,SAAU5T,GAChDA,EAAE2F,iBACFtP,KAAKD,UAAUM,KAAK,kCAAkCuB,OACxD,ECjIAiH,EAAajI,UAAUiY,SAAW,WAChC7Y,KAAK2E,aAAaK,KAAK,gBAAiB,QACxChF,KAAKD,UAAUmZ,YAAY,iBAC3BlZ,KAAKD,UAAUM,KAAK,SAAS6J,QAAQoB,IAAI,GAAG1J,OAC9C,EAEAiH,EAAajI,UAAUsE,SAAW,WAChClF,KAAKD,UAAUuG,SAAS,iBACxBtG,KAAK2E,aAAaK,KAAK,gBAAiB,QAC1C,EAEA6D,EAAajI,UAAU4c,oBAAsB,WACK,UAA5Cxd,KAAK2E,aAAaK,KAAK,iBACzBhF,KAAK6Y,WAEL7Y,KAAKkF,UAET,EAEA2D,EAAajI,UAAUqI,gBAAkB,SAAUU,GAE9C1J,EAAE0L,SAAS3L,KAAK+I,sBAAsB,GAAIY,EAAEiC,SAC5C3L,EAAE0L,SAAS3L,KAAKD,UAAU,GAAI4J,EAAEiC,SAEjC5L,KAAKkF,UAET,EClCAiE,EAAcvI,UAAUyI,aAAe,SAAUjE,GAC/CA,EAASA,GAAU,CAAE,EACrBpF,KAAKyd,cAAgBrY,EAAOqY,eAAiB,kCAC7Czd,KAAK0d,cAAgBtY,EAAOsY,eAAiB,YAC7C1d,KAAK2d,eAAiBvY,EAAOuY,gBAAkB,YACjD,EAEAxU,EAAcvI,UAAU2I,qBAAuB,WAC7C,MAAMqU,EAAW5d,KAAKoJ,MAAM/I,KAAK,YACjC,IAAIwd,EACJ,IAAK,IAAI/c,EAAI,EAAGA,EAAI8c,EAAS7c,OAAQD,IACnC+c,EAAU5d,EAAE2d,EAAS9c,IACjB+c,EAAQ7Y,KAAK,cACfhF,KAAK8d,oBAAoBD,EAAS/c,EAGxC,EAEAqI,EAAcvI,UAAUkd,oBAAsB,SAAUD,EAAS/c,GAC/D,MAAMkI,EAAO6U,EAAQ7U,OACf5E,EAASnE,EAAE,qCAAqCa,MAAMkI,cAC5D6U,EAAQ7U,KAAK,IACb6U,EAAQ3W,OAAO9C,EACjB,EAEA+E,EAAcvI,UAAU4I,gBAAkB,WACxCxJ,KAAKuZ,OAAStZ,EACZ,6FAEFD,KAAKoJ,MAAM1B,SAASR,OAAOlH,KAAKuZ,OAClC,EAEApQ,EAAcvI,UAAU6I,uBAAyB,WAC/C,MAAMsU,EAAO/d,KAAKge,oBAElBhe,KAAKoJ,MACF/I,KAAK,MACLwE,OAAO,qDACPqF,QACAM,MAAK,CAACnG,EAAOkD,KACZ,MAAM0W,EAAgBhe,EAAEsH,GAAIvC,KAAK,aAC3BkZ,EAAeje,EAAEsH,GAAIlH,KAAK,UAAU2E,KAAK,cACzCmZ,EAAane,KAAKoe,KAAKL,EAAMG,EAAcD,GACjDje,KAAKqe,QAAQF,EAAW,GAE9B,EAEAhV,EAAcvI,UAAU0d,kBAAoB,SAAU3U,GACpD,MAAMuU,EAAevU,EAAEuB,cAAc7J,aAAa,cAC5C4c,EAAgBhe,EAAE0J,EAAEuB,eAAexD,SAAS1C,KAAK,aACvD,IAAIuZ,EAEFA,EADoB,SAAlBN,GAA8C,eAAlBA,EACX,YAEA,aAErB,MAAMF,EAAO/d,KAAKge,oBACZG,EAAane,KAAKoe,KAAKL,EAAMG,EAAcK,GACjDve,KAAKqe,QAAQF,GACbne,KAAKwe,qBACLxe,KAAKye,kBAAkBxe,EAAE0J,EAAEuB,eAAgBqT,EAC7C,EAEApV,EAAcvI,UAAU6d,kBAAoB,SAAUra,EAAQsa,GAC5Dta,EAAOsD,SAAS1C,KAAK,YAAa0Z,GAClC,IAAIjE,EAAUza,KAAKyd,cACnBhD,EAAUA,EAAQ7P,QAAQ,YAAaxG,EAAO4E,QAC9CyR,EAAUA,EAAQ7P,QAAQ,cAAe5K,KAAK,GAAG0e,UACjD1e,KAAKuZ,OAAOvQ,KAAKyR,EACnB,EAEAtR,EAAcvI,UAAU4d,mBAAqB,WAC3Cxe,KAAKoJ,MAAM/I,KAAK,YAAY2E,KAAK,YAAa,OAChD,EAEAmE,EAAcvI,UAAUyd,QAAU,SAAUN,GAC1C,IAAK,IAAIjd,EAAI,EAAGA,EAAIid,EAAKhd,OAAQD,IAC/Bd,KAAKsJ,KAAKpC,OAAO6W,EAAKjd,GAE1B,EAEAqI,EAAcvI,UAAUod,kBAAoB,WAC1C,MAAMD,EAAO,GACPY,EAAM3e,KAAKsJ,KAAKjJ,KAAK,MAC3B,IAAK,IAAIS,EAAI,EAAGA,EAAI6d,EAAI5d,OAAQD,IAC9Bid,EAAKnL,KAAK+L,EAAI7d,IAEhB,OAAOid,CACT,EAEA5U,EAAcvI,UAAUwd,KAAO,SAAUL,EAAMG,EAAcD,GAoB3D,OAnBgBF,EAAKK,KACnB,SAAUQ,EAAMC,GACd,MAAMC,EAAM7e,EAAE2e,GAAMve,KAAK,SAAS0e,GAAGb,GAC/Bc,EAAM/e,EAAE4e,GAAMxe,KAAK,SAAS0e,GAAGb,GAE/Be,EACc,cAAlBhB,EACIje,KAAKkf,aAAaJ,GAClB9e,KAAKkf,aAAaF,GAClBG,EACc,cAAlBlB,EACIje,KAAKkf,aAAaF,GAClBhf,KAAKkf,aAAaJ,GAExB,MAAsB,iBAAXG,GAAyC,iBAAXE,EAChCF,EAAOhM,WAAWmM,cAAcD,EAAOlM,YACzCgM,EAASE,CACjB,EAACjW,KAAKlJ,MAGX,EAEAmJ,EAAcvI,UAAUse,aAAe,SAAUG,GAC/C,MAAMpF,EAAMoF,EAAKra,KAAK,oBAAsBqa,EAAKvM,OAE3CwM,EAAcrS,OAAOgN,GAC3B,OAAO7E,MAAMkK,GAAerF,EAAMqF,CACpC,ECZAC,EAAAzf,WAAAA,EAAAyf,EAAA1d,MAAAA,EAAA0d,EAAA3c,WAAAA,EAAA2c,EAAAvc,WAAAA,EAAAuc,EAAA7a,mBAAAA,EAAA6a,EAAApa,gBAAAA,EAAAoa,EAAA3Y,YAAAA,EAAA2Y,EAAAlY,eAAAA,EAAAkY,EAAA3X,eAAAA,EAAA2X,EAAA1W,aAAAA,EAAA0W,EAAApW,cAAAA,EAAAoW,EAAAC,QA1GA,SAAiBre,GAMf,MAAMse,OAAiC,KAJvCte,OAA6B,IAAZA,EAA0BA,EAAU,CAAE,GAI1Bse,MAAwBte,EAAQse,MAAQpa,SAIrE9E,EAFqBkf,EAAMjR,iBAAiB,oCAEd,SAAUkR,GACtC,IAAI5f,EAAW4f,EACnB,IAMEnf,EAJsBkf,EAAMjR,iBAC1B,qCAG6B,SAAUmR,GACvC,IAAI/Y,EAAY,CACd7G,UAAW4f,EAAazb,cACtByb,EAAate,aAAa,+BAE5B8F,WAAYwY,EAAanR,iBACvB,kCAEF1H,UAAW6Y,EAAate,aAAa,+BAE3C,IAMEd,EAJyBkf,EAAMjR,iBAC7B,wCAGgC,SAAUoR,GAC1C,IAAIvY,EAAeuY,EACvB,IAMErf,EAJyBkf,EAAMjR,iBAC7B,yCAGgC,SAAUqR,GAC1C,MAAM1e,EAAU,CACdiH,SAAUnI,EAAE4f,IAGRC,EAAcD,EAAgBxe,aAClC,qCAGF,GAAIye,EAAa,CACf,MAAMhY,EAAUgY,EAAY9R,MAAM,KAElC7M,EAAQ2G,QAAU,CAAE,EAEpB,IAAK,MAAM8B,KAAQ9B,EACjB3G,EAAQ2G,QAAQA,EAAQ8B,KAAS,CAEzC,CAEI,IAAIhC,EAAezG,EACvB,IAMEZ,EAJuBkf,EAAMjR,iBAC3B,sCAG8B,SAAUuR,GACxC,IAAIlX,EAAa,CACflE,aAAc,CACZ5E,UAAWE,EAAE8f,EAAc7b,cAAc,+BACzC8E,KAAM+W,EAAc1e,aAAa,gCAEnCyH,OAAQ,CACN/I,UAAWE,EAAE8f,EAAc7b,cAAc,kBAGjD,IAME3D,EAJwBkf,EAAMjR,iBAC5B,uCAG+B,SAAUwR,GACzC,IAAI7W,EAAc,CAChBC,MAAO4W,GAEb,IAIEzf,EAFqBkf,EAAMjR,iBAAiB,oCAEd,SAAUyR,GACtC,IAAIjd,EAAWid,EAAa,CAAE,GAAE1U,MACpC,IAIEhL,EAFqBkf,EAAMjR,iBAAiB,oCAEd,SAAU0R,GACtC,IAAItd,EAAWsd,EAAa,CAAE,GAAE3U,MACpC,IAGEhL,EADgBkf,EAAMjR,iBAAiB,8BACd,SAAU2R,GACjC,IAAIte,EAAMse,EAAQ,CAAE,GAAE5U,MAC1B,GACA,EAAAgU,EAAAa,QC3HgB,mBD2HhB"}